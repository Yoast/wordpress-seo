yoastWebpackJsonp([10],{1030:function(e,t,s){"use strict";function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}Object.defineProperty(t,"__esModule",{value:!0}),t.firstToUpperCase=o,t.stripHTML=n},1657:function(e,t,s){"use strict";var o=s(1658);(0,function(e){return e&&e.__esModule?e:{default:e}}(o).default)()},1658:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),r=(o(n),s(1659)),i=o(r),a=window.wp.i18n.__,l=window.wp.blocks.registerBlockType;t.default=function(){l("yoast/how-to-block",{title:a("How-to","wordpress-seo"),icon:"editor-ol",category:"yoast-structured-data-blocks",keywords:[a("How-to","wordpress-seo"),a("How to","wordpress-seo")],attributes:{title:{type:"array",source:"children",selector:".schema-how-to-title"},hasDuration:{type:"boolean"},hours:{type:"number"},minutes:{type:"number"},description:{type:"array",source:"children",selector:".schema-how-to-description"},steps:{type:"array"},additionalListCssClasses:{type:"string"},unorderedList:{type:"boolean"}},edit:function(e){var t=e.attributes,s=e.setAttributes,o=e.className;return t.steps&&0!==t.steps.length||(t.steps=[{id:i.default.generateId("how-to-step"),contents:[]}]),yoast._wp.element.createElement(i.default,{attributes:t,setAttributes:s,className:o})},save:function(e){var t=e.attributes;return i.default.getContent(t)}})}},1659:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),l=s(0),u=(o(l),s(3)),c=o(u),p=s(1660),d=o(p),m=s(1030),h=window.wp.i18n.__,f=window.wp.editor,w=f.RichText,y=f.InspectorControls,b=window.wp.components,g=b.IconButton,v=b.PanelBody,_=b.TextControl,S=b.ToggleControl,C=window.wp.element,k=C.Component,E=C.renderToString,N=window.wp.element.Fragment,T=function(e){function t(e){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.state={focus:null},s.changeStep=s.changeStep.bind(s),s.insertStep=s.insertStep.bind(s),s.removeStep=s.removeStep.bind(s),s.swapSteps=s.swapSteps.bind(s),s.setFocus=s.setFocus.bind(s),s.addCSSClasses=s.addCSSClasses.bind(s),s.getListTypeHelp=s.getListTypeHelp.bind(s),s.toggleListType=s.toggleListType.bind(s),s.editorRefs={},s}return i(t,e),a(t,[{key:"changeStep",value:function(e,t){var s=this.props.attributes.steps?this.props.attributes.steps.slice():[];t>=s.length||(s[t].contents=e,this.props.setAttributes({steps:s}))}},{key:"insertStep",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.props.attributes.steps?this.props.attributes.steps.slice():[];e||(e=n.length-1),n.splice(e+1,0,{id:t.generateId("how-to-step"),contents:s}),this.props.setAttributes({steps:n}),o&&setTimeout(this.setFocus.bind(this,e+1))}},{key:"swapSteps",value:function(e,t){var s=this.props.attributes.steps?this.props.attributes.steps.slice():[],o=s[e];s[e]=s[t],s[t]=o;var n=this.editorRefs[e];this.editorRefs[e]=this.editorRefs[t],this.editorRefs[t]=n,this.props.setAttributes({steps:s}),this.state.focus===e?this.setFocus(t):this.state.focus===t&&this.setFocus(e)}},{key:"removeStep",value:function(e){var t=this.props.attributes.steps?this.props.attributes.steps.slice():[];t.splice(e,1),this.props.setAttributes({steps:t}),e>0?this.setFocus(e-1):this.setFocus("description")}},{key:"setFocus",value:function(e){this.setState({focus:e}),this.editorRefs[e]&&this.editorRefs[e].focus()}},{key:"getSteps",value:function(){var e=this;return this.props.attributes.steps?this.props.attributes.steps.map(function(t,s){return yoast._wp.element.createElement(d.default,{key:t.id,step:t,index:s,editorRef:function(t){e.editorRefs[s]=t},onChange:function(t){return e.changeStep(t,s)},insertStep:function(t){return e.insertStep(s,t)},removeStep:function(){return e.removeStep(s)},onFocus:function(){return e.setFocus(s)},onMoveUp:function(){return e.swapSteps(s,s-1)},onMoveDown:function(){return e.swapSteps(s,s+1)},isFirst:0===s,isLast:s===e.props.attributes.steps.length-1,isSelected:e.state.focus===s})}):null}},{key:"getDuration",value:function(){var e=this,t=this.props,s=t.attributes,o=t.setAttributes;return s.hasDuration?yoast._wp.element.createElement("div",{className:"schema-how-to-duration"},yoast._wp.element.createElement("span",null,h("Total time:","wordpress-seo")," "),yoast._wp.element.createElement("input",{className:"schema-how-to-duration-input",type:"number",value:s.hours,min:"0",onFocus:function(){return e.setFocus("hours")},onChange:function(e){return o({hours:e.target.value})},placeholder:"HH"}),yoast._wp.element.createElement("span",null,":"),yoast._wp.element.createElement("input",{className:"schema-how-to-duration-input",type:"number",min:"0",max:"59",value:s.minutes,onFocus:function(){return e.setFocus("minutes")},onChange:function(e){return o({minutes:e.target.value})},placeholder:"MM"}),yoast._wp.element.createElement(g,{className:"schema-how-to-duration-button editor-inserter__toggle",icon:"trash",label:h("Delete total time","wordpress-seo"),onClick:function(){return o({hasDuration:!1})}})):yoast._wp.element.createElement(g,{icon:"insert",onClick:function(){return o({hasDuration:!0})},className:"schema-how-to-duration-button editor-inserter__toggle"},h("Add total time","wordpress-seo"))}},{key:"getAddStepButton",value:function(){var e=this;return yoast._wp.element.createElement(g,{icon:"insert",onClick:function(){return e.insertStep()},className:"editor-inserter__toggle"},h("Add step","wordpress-seo"))}},{key:"addCSSClasses",value:function(e){this.props.setAttributes({additionalListCssClasses:e})}},{key:"toggleListType",value:function(e){this.props.setAttributes({unorderedList:e})}},{key:"getListTypeHelp",value:function(e){return e?h("Showing step items as an unordered list","wordpress-seo"):h("Showing step items as an ordered list.","wordpress-seo")}},{key:"getSidebar",value:function(e,t){return yoast._wp.element.createElement(y,null,yoast._wp.element.createElement(v,{title:h("Settings","wordpress-seo"),className:"blocks-font-size"},yoast._wp.element.createElement(_,{label:h("Additional CSS Classes for list","wordpress-seo"),value:t,onChange:this.addCSSClasses,help:h("CSS classes to add to the list of steps (excluding the how-to header)","wordpress-seo")}),yoast._wp.element.createElement(S,{label:h("Unordered list","wordpress-seo"),checked:e,onChange:this.toggleListType,help:this.getListTypeHelp})))}},{key:"render",value:function(){var e=this,t=this.props,s=t.attributes,o=t.setAttributes,n=t.className;return yoast._wp.element.createElement("div",{className:"schema-how-to "+n},yoast._wp.element.createElement(w,{tagName:"h2",className:"schema-how-to-title",value:s.title,isSelected:"title"===this.state.focus,setFocusedElement:function(){return e.setFocus("title")},onChange:function(e){return o({title:e})},onSetup:function(t){e.editorRefs.title=t},placeholder:h("Enter a title for your instructions","wordpress-seo"),keepPlaceholderOnFocus:!0}),this.getDuration(),yoast._wp.element.createElement(w,{tagName:"p",className:"schema-how-to-description",value:s.description,isSelected:"description"===this.state.focus,setFocusedElement:function(){return e.setFocus("description")},onChange:function(e){return o({description:e})},onSetup:function(t){e.editorRefs.description=t},placeholder:h("Enter a description","wordpress-seo"),keepPlaceholderOnFocus:!0}),yoast._wp.element.createElement("ul",{className:"schema-how-to-steps "+s.additionalListCssClasses},this.getSteps()),yoast._wp.element.createElement("div",{className:"schema-how-to-buttons"},this.getAddStepButton()),this.getSidebar(s.unorderedList,s.additionalListCssClasses))}}],[{key:"generateId",value:function(e){return e+"-"+(new Date).getTime()}},{key:"toJSONLD",value:function(e){var t={"@context":"http://schema.org","@type":"HowTo",name:(0,m.stripHTML)(E(e.title))};return e.hasDuration&&(t.totalTime="PT"+(e.hours||0)+"H"+(e.minutes||0)+"M"),e.description&&e.description.length>0&&(t.description=(0,m.stripHTML)(E(e.description))),e.steps&&e.steps.length>0&&(t.step=e.steps.map(function(e,t){return d.default.toJSONLD(e,t)})),t}},{key:"renderJSONLD",value:function(e){var t=JSON.stringify(this.toJSONLD(e),null,3);return t=t.replace(/\[[\s]+\{/g,"[{"),yoast._wp.element.createElement("script",{type:"application/ld+json"},t)}},{key:"getContent",value:function(e){var t=e.steps,s=e.title,o=e.hours,n=e.minutes,r=e.description,i=e.unorderedList,a=e.className,l=e.additionalListCssClasses;t=t?t.map(function(e){return d.default.getContent(e)}):null;var u=["schema-how-to",a].filter(function(e){return e}).join(" "),c=["schema-how-to-steps",l].filter(function(e){return e}).join(" ");return yoast._wp.element.createElement(N,null,this.renderJSONLD(e),yoast._wp.element.createElement("div",{className:u},yoast._wp.element.createElement(w.Content,{tagName:"h2",className:"schema-how-to-title",value:s,id:(0,m.stripHTML)(E(s)).toLowerCase().replace(/\s+/g,"-")}),e.hasDuration&&yoast._wp.element.createElement("p",{className:"schema-how-to-total-time"},h("Total time:","wordpress-seo")," ",o||0,":",("00"+(n||0)).slice(-2)),yoast._wp.element.createElement(w.Content,{tagName:"p",className:"schema-how-to-description",value:r}),i?yoast._wp.element.createElement("ul",{className:c},t):yoast._wp.element.createElement("ol",{className:c},t)))}}]),t}(k);t.default=T,T.propTypes={attributes:c.default.object.isRequired,setAttributes:c.default.func.isRequired,className:c.default.string}},1660:function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),l=s(0),u=(o(l),s(3)),c=o(u),p=s(1030),d=window.wp.element,m=d.Component,h=d.renderToString,f=window.wp.i18n.__,w=window.wp.components.IconButton,y=window.wp.editor,b=y.RichText,g=y.MediaUpload,v=window.wp.blocks.getBlockContent,_=function(e){function t(e){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.onSplit=s.onSplit.bind(s),s.onSelectImage=s.onSelectImage.bind(s),s}return i(t,e),a(t,[{key:"getButtons",value:function(){var e=this.props,s=e.step,o=e.removeStep,n=e.insertStep;return yoast._wp.element.createElement("div",{className:"schema-how-to-step-button-container"},!t.getImageSrc(s.contents)&&yoast._wp.element.createElement(g,{onSelect:this.onSelectImage,type:"image",value:s.id,render:function(e){var t=e.open;return yoast._wp.element.createElement(w,{className:"schema-how-to-step-button editor-inserter__toggle how-to-step-add-media",icon:"insert",onClick:t},f("Add image","wordpress-seo"))}}),yoast._wp.element.createElement(w,{className:"schema-how-to-step-button editor-inserter__toggle",icon:"trash",label:f("Delete step","wordpress-seo"),onClick:o}),yoast._wp.element.createElement(w,{className:"schema-how-to-step-button editor-inserter__toggle",icon:"insert",label:f("Insert step","wordpress-seo"),onClick:n}))}},{key:"getMover",value:function(){return yoast._wp.element.createElement("div",{className:"schema-how-to-step-mover"},!this.props.isFirst&&yoast._wp.element.createElement(w,{className:"editor-block-mover__control",onClick:this.props.onMoveUp,icon:"arrow-up-alt2",label:f("Move step up","wordpress-seo")}),!this.props.isLast&&yoast._wp.element.createElement(w,{className:"editor-block-mover__control",onClick:this.props.isLast?null:this.props.onMoveDown,icon:"arrow-down-alt2",label:f("Move step down","wordpress-seo")}))}},{key:"onSelectImage",value:function(e){var t=this.props.step.contents.slice(),s=yoast._wp.element.createElement("img",{key:e.id,alt:e.alt,src:e.url});t.push?t.push(s):t=[t,s],this.props.onChange(t)}},{key:"onSplit",value:function(e,t){for(var s=[],o=arguments.length,n=Array(o>2?o-2:0),r=2;r<o;r++)n[r-2]=arguments[r];for(var i=0;i<n.length;i++){var a=n[i];"core/list"!==a.name?s.push(v(a)):s=s.concat(a.attributes.values.map(function(e){return e.props.children}))}t&&s.push(t),e||(e=s.pop()),this.props.onChange(e),s.forEach(this.props.insertStep)}},{key:"render",value:function(){var e=this.props,t=e.index,s=e.step,o=e.onChange,n=e.onFocus,r=e.isSelected,i=e.editorRef,a=s.id,l=s.contents;return yoast._wp.element.createElement("li",{className:"schema-how-to-step",onFocus:n},yoast._wp.element.createElement("span",{className:"schema-how-to-step-number"},t+1,"."),yoast._wp.element.createElement(b,{onSetup:i,key:a,value:l,onChange:o,isSelected:r,onSplit:this.onSplit,placeholder:f("Enter a step description","wordpress-seo"),keepPlaceholderOnFocus:!0}),r&&this.getMover(),r&&this.getButtons())}}],[{key:"getImageSrc",value:function(e){if(!e||!e.filter)return!1;var t=e.filter(function(e){return e&&e.type&&"img"===e.type})[0];return!!t&&t.props.src}},{key:"toJSONLD",value:function(e,s){var o={"@type":"HowToStep",position:(s+1).toString(),text:(0,p.stripHTML)(h(e.contents))},n=t.getImageSrc(e.contents);return n&&(o.associatedMedia={"@type":"ImageObject",contentUrl:n}),o}},{key:"getContent",value:function(e){return yoast._wp.element.createElement(b.Content,{tagName:"li",className:"schema-how-to-step",key:e.id,value:e.contents})}}]),t}(m);t.default=_,_.propTypes={index:c.default.number.isRequired,step:c.default.object.isRequired,onChange:c.default.func.isRequired,insertStep:c.default.func.isRequired,removeStep:c.default.func.isRequired,onFocus:c.default.func.isRequired,editorRef:c.default.func.isRequired,onMoveUp:c.default.func.isRequired,onMoveDown:c.default.func.isRequired,isSelected:c.default.bool,isFirst:c.default.bool,isLast:c.default.bool}},3:function(e,t,s){e.exports=s(440)()},440:function(e,t,s){"use strict";var o=s(662),n=s(1021),r=s(441);e.exports=function(){function e(e,t,s,o,i,a){a!==r&&n(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return s.checkPropTypes=o,s.PropTypes=s,s}},441:function(e,t,s){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},[1657]);