!function(a){"use strict";var b=function(){};b.prototype.getData=function(){return{title:this.getDataFromInput("title"),keyword:this.getDataFromInput("keyword"),text:this.getDataFromInput("text"),pageTitle:this.getDataFromInput("pageTitle"),url:this.getDataFromInput("url"),baseUrl:this.getDataFromInput("baseUrl"),snippetTitle:this.getDataFromInput("title"),meta:this.getDataFromInput("meta"),snippetMeta:this.getDataFromInput("meta"),snippetCite:this.getDataFromInput("cite")}},b.prototype.getDataFromInput=function(a){var b,c="";switch(a){case"keyword":b=document.getElementById("wpseo_focuskw"),c=b.value,""===c&&(c=document.getElementById("name").value,b.placeholder=c);break;case"meta":b=document.getElementById("hidden_wpseo_desc"),null!==b&&(c=b.value);break;case"text":c=this.getContentTinyMCE();break;case"pageTitle":case"title":c=document.getElementById("hidden_wpseo_title").value;break;case"url":case"cite":c=document.getElementById("slug").value;break;case"baseUrl":c=wpseoTermScraperL10n.home_url.replace(/https?:\/\//gi,"");break;case"cite":b=document.getElementById("snippet_cite"),null!==b&&(c=b.textContent)}return c},b.prototype.getContentTinyMCE=function(){var a=document.getElementById("description").value;return 0!==tinyMCE.editors.length&&(a=tinyMCE.get("description").getContent()),a},b.prototype.setDataFromSnippet=function(a,b){switch(b){case"snippet_meta":document.getElementById("hidden_wpseo_desc").value=a;break;case"snippet_cite":document.getElementById("slug").value=a;break;case"snippet_title":document.getElementById("hidden_wpseo_title").value=a}},b.prototype.bindElementEvents=function(a){this.snippetPreviewEventBinder(a.snippetPreview),this.inputElementEventBinder(a),document.getElementById("wpseo_focuskw").addEventListener("keydown",a.snippetPreview.disableEnter)},b.prototype.snippetPreviewEventBinder=function(a){for(var b=["snippet_meta","snippet_title","snippet_cite"],c=0;c<b.length;c++)this.bindSnippetEvents(document.getElementById(b[c]),a);var d=document.getElementById("snippet_title");d.addEventListener("focus",a.setSiteName.bind(a)),d.addEventListener("blur",a.unsetSiteName.bind(a))},b.prototype.bindSnippetEvents=function(a,b){a.addEventListener("keydown",b.disableEnter.bind(b)),a.addEventListener("blur",b.checkTextLength.bind(b)),a.addEventListener("input",b.textFeedback.bind(b)),a.addEventListener("focus",b.textFeedback.bind(b)),a.addEventListener("mouseover",b.showEditIcon.bind(b)),a.addEventListener("mouseout",b.hideEditIcon.bind(b)),a.addEventListener("focus",b.hideEditIcon.bind(b)),a.addEventListener("keyup",b.hideEditIcon.bind(b)),a.addEventListener("focus",b.getUnformattedText.bind(b)),a.addEventListener("keyup",b.setUnformattedText.bind(b)),a.addEventListener("click",b.setFocus.bind(b)),a.className=a.className+" showIcon"},b.prototype.inputElementEventBinder=function(a){for(var b=["name","description","slug","wpseo_focuskw"],c=0;c<b.length;c++){var d=document.getElementById(b[c]);null!==d&&document.getElementById(b[c]).addEventListener("input",a.analyzeTimer.bind(a))}tinyMCE.on("addEditor",function(b){b.editor.on("input",function(){a.analyzeTimer.call(a)})})},b.prototype.saveScores=function(b){var c=wp.template("score_svg");document.getElementById(YoastSEO.analyzerArgs.targets.overall).innerHTML=c(),document.getElementById("hidden_wpseo_linkdex").value=b,jQuery(window).trigger("YoastSEO:numericScore",b),this.updateKeywordTabContent(a("#wpseo_focuskw").val(),b)},b.prototype.initKeywordTabTemplate=function(){var b,c;a(".wpseo-metabox-tabs").on("click",".wpseo_tablink",function(a){a.preventDefault()}),b=a("#wpseo_focuskw").val(),c=a("#hidden_wpseo_linkdex").val(),this.updateKeywordTabContent(b,c)},b.prototype.updateKeywordTabContent=function(b,c){var d,e;d=b.length>0?b:"...",c=parseInt(c,10),c=YoastSEO.ScoreFormatter.prototype.scoreRating(c),e=wp.template("keyword_tab")({keyword:b,placeholder:d,score:c,hideRemove:!0,prefix:wpseoTermScraperL10n.contentTab+" "}),a(".wpseo_keyword_tab").replaceWith(e)},b.prototype.updateKeywordUsage=function(){var a=this.value;jQuery.post(ajaxurl,{action:"get_term_keyword_usage",post_id:jQuery("#post_ID").val(),keyword:a,taxonomy:wpseoTermScraperL10n.taxonomy},function(b){b&&(wpseoTermScraperL10n.keyword_usage[a]=b,YoastSEO.app.refresh())},"json")},b.prototype.updateSnippetValues=function(a){var b=a.currentTarget.textContent,c=a.currentTarget.id;"undefined"!=typeof YoastSEO.app.snippetPreview.unformattedText[c]&&(a.currentTarget.textContent=YoastSEO.app.snippetPreview.unformattedText[c]),this.setDataFromSnippet(b,a.currentTarget.id),YoastSEO.app.refresh()};var c=function(){var a=document.getElementById("wp-description-wrap");a.style.display="none";var b=jQuery(".term-description-wrap").find("td").find("p");jQuery(".term-description-wrap").find("td").html(""),jQuery(".term-description-wrap").find("td").append(a).append(b),a.style.display="block"};jQuery(document).ready(function(){c();var a=new b;if(YoastSEO.analyzerArgs={analyzer:!0,ajax:!0,snippetPreview:!0,snippetSuffix:" "+wpseoTermScraperL10n.sep+" "+wpseoTermScraperL10n.sitename,elementTarget:["content","yoast_wpseo_focuskw","yoast_wpseo_metadesc","excerpt","editable-post-name","editable-post-name-full"],replaceTarget:["yoast_wpseo_metadesc","excerpt","yoast_wpseo_title"],resetTarget:["snippet_meta","snippet_title","snippet_cite"],typeDelay:300,typeDelayStep:100,maxTypeDelay:1500,dynamicDelay:!0,multiKeyword:!1,targets:{output:"wpseo_analysis",overall:"taxonomy_overall",snippet:"wpseo_snippet"},translations:wpseoTermScraperL10n.translations,queue:["wordCount","keywordDensity","subHeadings","stopwords","fleschReading","linkCount","imageCount","urlKeyword","urlLength","metaDescription","pageTitleKeyword","pageTitleLength","firstParagraph"],usedKeywords:wpseoTermScraperL10n.keyword_usage,searchUrl:'<a target="new" href='+wpseoTermScraperL10n.search_url+">",postUrl:'<a target="new" href='+wpseoTermScraperL10n.post_edit_url+">",callbacks:{getData:a.getData.bind(a),bindElementEvents:a.bindElementEvents.bind(a),updateSnippetValues:a.updateSnippetValues.bind(a),saveScores:a.saveScores.bind(a)}},0===wpseoTermScraperL10n.translations.length)delete YoastSEO.analyzerArgs.translations;else{var d=wpseoTermScraperL10n.translations;d.domain="js-text-analysis",d.locale_data["js-text-analysis"]=d.locale_data["wordpress-seo"],delete d.locale_data["wordpress-seo"],YoastSEO.analyzerArgs.translations=d}window.YoastSEO.app=new YoastSEO.App(YoastSEO.analyzerArgs),jQuery(window).trigger("YoastSEO:ready"),a.initKeywordTabTemplate()})}(jQuery);