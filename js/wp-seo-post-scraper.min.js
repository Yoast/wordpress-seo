!function(a){"use strict";var b="",c=function(){this.prepareSlugBinding()};c.prototype.prepareSlugBinding=function(){if(null===document.getElementById("editable-post-name")){var a=this;jQuery(document).on("after-autosave.update-post-slug",function(){a.bindSnippetCiteEvents(0)})}else this.bindSlugEditor()},c.prototype.bindSnippetCiteEvents=function(a){a=a||0;var b=document.getElementById("editable-post-name"),c=document.getElementById("post_name");null!==b?(this.bindSlugEditor(),""===c.value&&(c.value=b.textContent),YoastSEO.app.snippetPreview.unformattedText.snippet_cite=c.value,YoastSEO.app.refresh()):5e3>a&&(a+=200,setTimeout(this.bindSnippetCiteEvents.bind(this,a),200))},c.prototype.bindSlugEditor=function(){jQuery("#edit-slug-box").on("click",".edit-slug",function(){jQuery("#edit-slug-buttons > button.save").on("click",function(){YoastSEO.app.refresh(),YoastSEO.app.snippetPreview.unformattedText.snippet_cite=document.getElementById("post_name").value})})},c.prototype.getData=function(){return{keyword:this.getDataFromInput("keyword"),meta:this.getDataFromInput("meta"),text:this.getDataFromInput("text"),pageTitle:this.getDataFromInput("pageTitle"),title:this.getDataFromInput("title"),url:this.getDataFromInput("url"),baseUrl:this.getDataFromInput("baseUrl"),excerpt:this.getDataFromInput("excerpt"),snippetTitle:this.getDataFromInput("snippetTitle"),snippetMeta:this.getDataFromInput("meta"),snippetCite:this.getDataFromInput("cite")}},c.prototype.getDataFromInput=function(a){var c="";switch(a){case"text":case"content":c=this.getContentTinyMCE();break;case"url":null!==document.getElementById("sample-permalink")&&(c=document.getElementById("sample-permalink").textContent);break;case"baseUrl":c=wpseoPostScraperL10n.home_url.replace(/https?:\/\//gi,"");break;case"cite":case"post_name":c=document.getElementById("post_name").value;break;case"meta":c=document.getElementById("yoast_wpseo_metadesc").value;break;case"keyword":c=document.getElementById("yoast_wpseo_focuskw").value,b=c;break;case"title":case"snippetTitle":c=document.getElementById("yoast_wpseo_title").value;break;case"pageTitle":c=document.getElementById("yoast_wpseo_title").value,""===c&&(c=document.getElementById("title").value);break;case"excerpt":null!==document.getElementById("excerpt")&&(c=document.getElementById("excerpt").value)}return c},c.prototype.setDataFromSnippet=function(a,b){switch(b){case"snippet_meta":document.getElementById("yoast_wpseo_metadesc").value=a;break;case"snippet_cite":document.getElementById("post_name").value=a,null!==document.getElementById("editable-post-name")&&(document.getElementById("editable-post-name").textContent=a,document.getElementById("editable-post-name-full").textContent=a);break;case"snippet_title":document.getElementById("yoast_wpseo_title").value=a}},c.prototype.getContentTinyMCE=function(){var a=document.getElementById("content").value;return 0!==tinyMCE.editors.length&&(a=tinyMCE.get("content").getContent()),a},c.prototype.bindElementEvents=function(a){this.snippetPreviewEventBinder(a.snippetPreview),this.inputElementEventBinder(a),document.getElementById("yoast_wpseo_focuskw").addEventListener("keydown",a.snippetPreview.disableEnter),document.getElementById("yoast_wpseo_focuskw").addEventListener("keyup",this.updateKeywordUsage)},c.prototype.snippetPreviewEventBinder=function(a){for(var b=["snippet_meta","snippet_title","snippet_cite"],c=0;c<b.length;c++)this.bindSnippetEvents(document.getElementById(b[c]),a)},c.prototype.bindSnippetEvents=function(a,b){a.addEventListener("keydown",b.disableEnter.bind(b)),a.addEventListener("input",b.textFeedback.bind(b)),a.addEventListener("focus",b.textFeedback.bind(b)),a.addEventListener("blur",b.textFeedback.bind(b)),a.addEventListener("mouseover",b.showEditIcon.bind(b)),a.addEventListener("mouseout",b.hideEditIcon.bind(b)),a.addEventListener("focus",b.hideEditIcon.bind(b)),a.addEventListener("keyup",b.hideEditIcon.bind(b)),a.addEventListener("focus",b.getUnformattedText.bind(b)),a.addEventListener("keyup",b.setUnformattedText.bind(b)),a.addEventListener("paste",b.setUnformattedText.bind(b)),a.addEventListener("cut",b.setUnformattedText.bind(b)),a.addEventListener("click",b.setFocus.bind(b)),a.className=a.className+" showIcon"},c.prototype.inputElementEventBinder=function(a){for(var b=["excerpt","content","yoast_wpseo_focuskw","title"],c=0;c<b.length;c++){var d=document.getElementById(b[c]);null!==d&&document.getElementById(b[c]).addEventListener("input",a.analyzeTimer.bind(a))}tinyMCE.on("addEditor",function(b){b.editor.on("input",function(){a.analyzeTimer.call(a)}),b.editor.on("change",function(){a.analyzeTimer.call(a)})}),document.getElementById("yoast_wpseo_focuskw").addEventListener("blur",this.resetQueue)},c.prototype.resetQueue=function(){""!==YoastSEO.app.rawData.keyword&&YoastSEO.app.runAnalyzer(this.rawData)},c.prototype.updateSnippet=function(a){this.updateSnippetValues(a),YoastSEO.app.snippetPreview.checkTextLength(a),YoastSEO.app.refresh()},c.prototype.updateSnippetValues=function(a){var b=a.currentTarget.textContent,c=a.currentTarget.id;"undefined"!=typeof YoastSEO.app.snippetPreview.unformattedText[c]&&(a.currentTarget.textContent=YoastSEO.app.snippetPreview.unformattedText[c]),this.setDataFromSnippet(b,a.currentTarget.id)},c.prototype.saveScores=function(c){var d;if(this.isMainKeyword(b)){var e=wp.template("score_svg");document.getElementById("wpseo-score").innerHTML=e(),document.getElementById("yoast_wpseo_linkdex").value=c,a(".yst-traffic-light").attr("class","yst-traffic-light "+d)}YoastSEO.multiKeyword||this.updateKeywordTabContent(b,c),jQuery(window).trigger("YoastSEO:numericScore",c)},c.prototype.isMainKeyword=function(b){var c,d;return c=a(".wpseo_keyword_tab").first().find(".wpseo_tablink"),d=c.data("keyword"),b===d},c.prototype.initKeywordTabTemplate=function(){var b,c;YoastSEO.multiKeyword||(a(".wpseo-metabox-tabs").on("click",".wpseo_tablink",function(a){a.preventDefault()}),b=a("#yoast_wpseo_focuskw").val(),c=a("#yoast_wpseo_linkdex").val(),this.updateKeywordTabContent(b,c))},c.prototype.updateKeywordTabContent=function(b,c){var d,e;c=parseInt(c,10),""===b&&(c="na"),d=b.length>0?b:"...",e=wp.template("keyword_tab")({keyword:b,placeholder:d,score:c,hideRemove:!0,prefix:wpseoPostScraperL10n.contentTab+" "}),a(".wpseo_keyword_tab").replaceWith(e)},c.prototype.updateKeywordUsage=function(){var a=this.value;jQuery.post(ajaxurl,{action:"get_focus_keyword_usage",post_id:jQuery("#post_ID").val(),keyword:a},function(b){b&&(wpseoPostScraperL10n.keyword_usage[a]=b,YoastSEO.app.refresh())},"json")},jQuery(document).on("ajaxComplete",function(a,b){null!==b.responseText.match("Permalink:")&&(YoastSEO.app.callbacks.getData(),YoastSEO.app.runAnalyzer(),YoastSEO.app.snippetPreview.reRender())}),jQuery(document).ready(function(){var a=new c;if(YoastSEO.analyzerArgs={analyzer:!0,ajax:!0,snippetPreview:!0,snippetSuffix:" "+wpseoPostScraperL10n.sep+" "+wpseoPostScraperL10n.sitename,elementTarget:["content","yoast_wpseo_focuskw","yoast_wpseo_metadesc","excerpt","editable-post-name","editable-post-name-full"],replaceTarget:["yoast_wpseo_metadesc","excerpt","yoast_wpseo_title"],resetTarget:["snippet_meta","snippet_title","snippet_cite"],typeDelay:300,typeDelayStep:100,maxTypeDelay:1500,dynamicDelay:!0,multiKeyword:!1,targets:{output:"wpseo-pageanalysis",snippet:"wpseosnippet",overall:"wpseo-score"},translations:wpseoPostScraperL10n.translations,queue:["wordCount","keywordDensity","subHeadings","stopwords","fleschReading","linkCount","imageCount","urlKeyword","urlLength","metaDescription","pageTitleKeyword","pageTitleLength","firstParagraph","keywordDoubles"],usedKeywords:wpseoPostScraperL10n.keyword_usage,searchUrl:'<a target="new" href='+wpseoPostScraperL10n.search_url+">",postUrl:'<a target="new" href='+wpseoPostScraperL10n.post_edit_url+">",callbacks:{getData:a.getData.bind(a),bindElementEvents:a.bindElementEvents.bind(a),updateSnippetValues:a.updateSnippet.bind(a),saveScores:a.saveScores.bind(a)}},0===wpseoPostScraperL10n.translations.length)delete YoastSEO.analyzerArgs.translations;else{var b=wpseoPostScraperL10n.translations;b.domain="js-text-analysis",b.locale_data["js-text-analysis"]=b.locale_data["wordpress-seo"],delete b.locale_data["wordpress-seo"],YoastSEO.analyzerArgs.translations=b}window.YoastSEO.app=new YoastSEO.App(YoastSEO.analyzerArgs),jQuery(window).trigger("YoastSEO:ready"),new YoastReplaceVarPlugin,new YoastShortcodePlugin,a.initKeywordTabTemplate()})}(jQuery);