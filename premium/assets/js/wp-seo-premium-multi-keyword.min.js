!function(a){"use strict";var b=5,c=function(){this.insertElements(),this.bindKeywordField(),this.bindKeywordAdd(),this.bindScore()};c.prototype.updateKeywords=function(){var b=[];a(".wpseo_keyword_tab > .wpseo_tablink").each(function(c,d){var e=a(d).data("keyword"),f=a(d).data("score");e.length>0&&b.push({keyword:e,score:f})}),a("#yoast_wpseo_focuskeywords").val(JSON.stringify(b))},c.prototype.insertElements=function(){a(".content > .wpseo_tablink").append(': <span class="wpseo-score-icon"><span class="screen-reader-text"></span></span><em><span class="wpseo_keyword"></span></em>'),this.addKeywordTabs()},c.prototype.reloadTabs=function(){window.wpseo_init_tabs(),this.bindKeywordTab(),this.bindKeywordRemove()},c.prototype.bindScore=function(){a(window).on("YoastSEO:numericScore",function(b,c){c=""!==a("#yoast_wpseo_focuskw").val()?this.scoreRating(c):"na";var d=a(".wpseo_keyword_tab.active");d.find(".wpseo_tablink").data("score",c),d.find(".wpseo-score-icon").attr("class","wpseo-score-icon "+c),d.find(".wpseo-score-icon > .screen-reader-text").text("SEO score "+c),this.updateKeywords()}.bind(this))},c.prototype.bindKeywordTab=function(){a(".wpseo_keyword_tab > .wpseo_tablink").click(function(){var b=a(this).data("keyword");a("#yoast_wpseo_focuskw").val(b).focus(),YoastSEO.app.refresh()})},c.prototype.bindKeywordRemove=function(){a(".remove-keyword").click(function(b){b.preventDefault();var c=a(b.currentTarget).parent("li"),d=c.prev();c.remove(),c.hasClass("active")&&d.find(".wpseo_tablink").click(),this.updateKeywords(),this.updateUI()}.bind(this))},c.prototype.bindKeywordField=function(){a("#yoast_wpseo_focuskw").on("input",function(b){var c=a(b.currentTarget).val(),d=a("li.active > .wpseo_tablink");d.data("keyword",c),d.find("span.wpseo_keyword").text(c||"..."),this.updateKeywords()}.bind(this))},c.prototype.bindKeywordAdd=function(){a(".wpseo-add-keyword").click(function(){this.canAddTab()&&this.addKeywordTab(null,"na",!0)}.bind(this))},c.prototype.addKeywordTabs=function(){var b=JSON.parse(a("#yoast_wpseo_focuskeywords").val()||"[]"),c=b.splice(0,1)[0]||{keyword:"",score:"na"};if(this.setupGeneralTab(c),b.length>0)for(var d in b){var e=b[d].keyword,f=b[d].score;this.addKeywordTab(e,f)}},c.prototype.setupGeneralTab=function(b){var c=b.keyword,d=b.score,e=a(".wpseo_keyword_tab.content").find(".wpseo-score-icon"),f=a(".content > .wpseo_tablink");a("#yoast_wpseo_focuskw").val(c),f.data("keyword",c),f.find("span.wpseo_keyword").text(c||"..."),f.data("score",d),e.attr("class","wpseo-score-icon "+d),e.find(".screen-reader-text").text("SEO score "+d)},c.prototype.addKeywordTab=function(b,c,d){b=b||"";var e=b.length>0?b:"...",f=wp.template("keyword_tab")({keyword:b,placeholder:e,score:c});a(".wpseo_keyword_tab:last").after(f),this.reloadTabs(),this.updateUI(),d===!0&&a(".wpseo_keyword_tab:last > .wpseo_tablink").click()},c.prototype.scoreRating=function(a){var b;switch(a){case 0:b="na";break;case 4:case 5:b="poor";break;case 6:case 7:b="ok";break;case 8:case 9:case 10:b="good";break;default:b="bad"}return b},c.prototype.updateUI=function(){var b=a(".wpseo-add-keyword");this.canAddTab()?b.prop("disabled",!1).attr("aria-disabled","false"):b.prop("disabled",!0).attr("aria-disabled","true")},c.prototype.canAddTab=function(){var c;return c=a(".wpseo_keyword_tab").length,b>c},a(document).ready(function(){new c})}(jQuery);