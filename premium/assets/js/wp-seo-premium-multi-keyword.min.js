YoastSEO="undefined"==typeof YoastSEO?{}:YoastSEO,function(a){"use strict";var b,c=5,d=function(){this.insertElements(),this.bindKeywordField(),this.bindKeywordAdd(),this.bindScore()};d.prototype.updateKeywords=function(){var b=[];a(".wpseo_keyword_tab > .wpseo_tablink").each(function(c,d){var e=a(d).data("keyword"),f=a(d).data("score");e.length>0&&b.push({keyword:e,score:f})}),a("#yoast_wpseo_focuskeywords").val(JSON.stringify(b))},d.prototype.insertElements=function(){a(".content > .wpseo_tablink").append(': <span class="wpseo-score-icon"><span class="screen-reader-text"></span></span><em><span class="wpseo_keyword"></span></em>'),this.addKeywordTabs()},d.prototype.reloadTabs=function(){window.wpseo_init_tabs(),this.bindKeywordTab(),this.bindKeywordRemove()},d.prototype.bindScore=function(){a(window).on("YoastSEO:numericScore",function(b,c){c=""!==a("#yoast_wpseo_focuskw").val()?this.scoreRating(c):"na";var d=a(".wpseo_keyword_tab.active");d.find(".wpseo_tablink").data("score",c),d.find(".wpseo-score-icon").attr("class","wpseo-score-icon "+c),d.find(".wpseo-score-icon > .screen-reader-text").text("SEO score "+c),this.updateKeywords()}.bind(this))},d.prototype.bindKeywordTab=function(){a(".wpseo-metabox-tabs").on("click",".wpseo_tablink",function(){var b=a(this).data("keyword");a("#yoast_wpseo_focuskw").val(b).focus(),YoastSEO.app.refresh()})},d.prototype.bindKeywordRemove=function(){a(".remove-keyword").click(function(b){b.preventDefault();var c=a(b.currentTarget).parent("li"),d=c.prev();c.remove(),c.hasClass("active")&&d.find(".wpseo_tablink").click(),this.updateKeywords(),this.updateUI()}.bind(this))},d.prototype.bindKeywordField=function(){a("#yoast_wpseo_focuskw").on("input",function(b){var c=a(b.currentTarget).val(),d=a("li.active > .wpseo_tablink");d.data("keyword",c),d.find("span.wpseo_keyword").text(c||"..."),this.updateKeywords()}.bind(this))},d.prototype.bindKeywordAdd=function(){a(".wpseo-add-keyword").click(function(){this.canAddTab()&&this.addKeywordTab(null,"na",!0)}.bind(this))},d.prototype.addKeywordTabs=function(){var b=JSON.parse(a("#yoast_wpseo_focuskeywords").val()||"[]"),c=b.splice(0,1)[0]||{keyword:"",score:"na"};if(this.setupGeneralTab(c),b.length>0)for(var d in b){var e=b[d].keyword,f=b[d].score;this.addKeywordTab(e,f)}},d.prototype.setupGeneralTab=function(b){var c=b.keyword,d=b.score,e=a(".wpseo_keyword_tab.content").find(".wpseo-score-icon"),f=a(".content > .wpseo_tablink");a("#yoast_wpseo_focuskw").val(c),f.data("keyword",c),f.find("span.wpseo_keyword").text(c||"..."),f.data("score",d),e.attr("class","wpseo-score-icon "+d),e.find(".screen-reader-text").text("SEO score "+d)},d.prototype.addKeywordTab=function(c,d,e){c=c||"";var f=c.length>0?c:"...",g=b({keyword:c,placeholder:f,score:d});a(".wpseo_keyword_tab:last").after(g),this.reloadTabs(),this.updateUI(),e===!0&&a(".wpseo_keyword_tab:last > .wpseo_tablink").click()},d.prototype.scoreRating=function(a){var b;switch(a){case 0:b="na";break;case 4:case 5:b="poor";break;case 6:case 7:b="ok";break;case 8:case 9:case 10:b="good";break;default:b="bad"}return b},d.prototype.updateUI=function(){var b=a(".wpseo-add-keyword");this.canAddTab()?b.prop("disabled",!1).attr("aria-disabled","false"):b.prop("disabled",!0).attr("aria-disabled","true")},d.prototype.updateInactiveKeywords=function(){var b;b=a(".wpseo_keyword_tab:not( .active )"),b.each(function(a,b){this.updateKeywordTab(b)}.bind(this))},d.prototype.updateKeywordTab=function(c){var d,e,f,g,h,i;c=a(c),e=c.find(".wpseo_tablink"),d=e.data("keyword"),f=this.analyzeKeyword(d),h=d.length>0?d:"...",f=parseInt(f,10),f=YoastSEO.ScoreFormatter.prototype.scoreRating(f),i={keyword:d,placeholder:h,score:f},0===c.index()&&(i.hideRemove=!0,i.prefix=wpseoPostScraperL10n.contentTab),g=b(i),c.replaceWith(g)},d.prototype.analyzeKeyword=function(a){var b,c;return b=YoastSEO.app.config.callbacks.getData(),b.i18n=YoastSEO.app.i18n,b.keyword=a,c=new YoastSEO.Analyzer(b),c.runQueue(),c.score(),c.analyzeScorer.getTotalScore()},d.prototype.canAddTab=function(){var b;return b=a(".wpseo_keyword_tab").length,c>b},a(window).on("YoastSEO:ready",function(){b=wp.template("keyword_tab");var c=new d;c.updateInactiveKeywords();var e=_.debounce(c.updateInactiveKeywords.bind(c),300);a(window).on("YoastSEO:numericScore",e)}),YoastSEO.multiKeyword=!0}(jQuery);