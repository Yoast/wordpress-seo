!function(){"use strict";var a=function(){this.insertElements(),this.bindKeywordField(),this.bindKeywordAdd(),this.bindScore()};a.prototype.updateKeywords=function(){var a=[];jQuery(".wpseo_keyword_tab > .wpseo_tablink").each(function(b,c){var d=jQuery(c).data("keyword"),e=jQuery(c).data("score");d.length>0&&a.push({keyword:d,score:e})}),jQuery("#yoast_wpseo_focuskeywords").val(JSON.stringify(a))},a.prototype.insertElements=function(){jQuery(".content > .wpseo_tablink").append(': <span class="wpseo-score-icon"><span class="screen-reader-text"></span></span><em><span class="wpseo_keyword"></span></em>'),this.addKeywordTabs()},a.prototype.reloadTabs=function(){window.wpseo_init_tabs(),this.bindKeywordTab(),this.bindKeywordRemove()},a.prototype.bindScore=function(){jQuery(window).on("YoastSEO:numericScore",function(a,b){b=""!==jQuery("#yoast_wpseo_focuskw").val()?this.scoreRating(b):"na";var c=jQuery(".wpseo_keyword_tab.active");c.find(".wpseo_tablink").data("score",b),c.find(".wpseo-score-icon").attr("class","wpseo-score-icon "+b),c.find(".wpseo-score-icon > .screen-reader-text").text("SEO score "+b),this.updateKeywords()}.bind(this))},a.prototype.bindKeywordTab=function(){jQuery(".wpseo_keyword_tab > .wpseo_tablink").click(function(){var a=jQuery(this).data("keyword");jQuery("#yoast_wpseo_focuskw").val(a).focus(),YoastSEO.app.refresh()})},a.prototype.bindKeywordRemove=function(){jQuery(".remove-keyword").click(function(a){a.preventDefault();var b=jQuery(a.currentTarget).parent("li"),c=b.prev();b.remove(),b.hasClass("active")&&c.find(".wpseo_tablink").click(),this.updateKeywords()}.bind(this))},a.prototype.bindKeywordField=function(){jQuery("#yoast_wpseo_focuskw").on("input",function(){var a=jQuery(this).val(),b=jQuery("li.active > .wpseo_tablink");b.data("keyword",a),b.find("span.wpseo_keyword").text(a||"..."),this.updateKeywords()}.bind(this))},a.prototype.bindKeywordAdd=function(){jQuery(".wpseo-add-keyword").click(function(){this.addKeywordTab(null,"na",!0)}.bind(this))},a.prototype.addKeywordTabs=function(){var a=JSON.parse(jQuery("#yoast_wpseo_focuskeywords").val()||"[]"),b=a.splice(0,1)[0]||{keyword:"",score:"na"};if(this.setupGeneralTab(b),a.length>0)for(var c in a){var d=a[c].keyword,e=a[c].score;this.addKeywordTab(d,e)}},a.prototype.setupGeneralTab=function(a){var b=a.keyword,c=a.score,d=jQuery(".wpseo_keyword_tab.content").find(".wpseo-score-icon"),e=jQuery(".content > .wpseo_tablink");jQuery("#yoast_wpseo_focuskw").val(b),e.data("keyword",b),e.find("span.wpseo_keyword").text(b||"..."),e.data("score",c),d.attr("class","wpseo-score-icon "+c),d.find(".screen-reader-text").text("SEO score "+c)},a.prototype.addKeywordTab=function(a,b,c){a=a||"";var d=a.length>0?a:"...",e=wp.template("keyword_tab")({keyword:a,placeholder:d,score:b});jQuery(".wpseo_keyword_tab:last").after(e),this.reloadTabs(),c===!0&&jQuery(".wpseo_keyword_tab:last > .wpseo_tablink").click()},a.prototype.scoreRating=function(a){var b;switch(a){case 0:b="na";break;case 4:case 5:b="poor";break;case 6:case 7:b="ok";break;case 8:case 9:case 10:b="good";break;default:b="bad"}return b},jQuery(document).ready(function(){new a})}();