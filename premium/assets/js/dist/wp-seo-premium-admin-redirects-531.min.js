!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";!function(a){function b(){a("#wpseo_redirects_type").select2({width:"400px",language:wpseoSelect2Locale})}function c(){d=wp.template("redirects-inline-edit"),a.each(a(".redirect-table-tab"),function(b,c){a(c).wpseoRedirects(a(c).attr("id"))}),b()}var d,e=[410,451],f={ORIGIN:1,TARGET:2,TYPE:0},g={ENTER:13},h=function(a){this.form=a};h.prototype.getOriginField=function(){return this.form.find("input[name=wpseo_redirects_origin]")},h.prototype.getTargetField=function(){return this.form.find("input[name=wpseo_redirects_target]")},h.prototype.getTypeField=function(){return this.form.find("select[name=wpseo_redirects_type]")},h.prototype.clearErrorMessage=function(){this.form.find(".wpseo_redirect_form .form_error").remove()},h.prototype.setErrorMessage=function(a){this.form.find(".wpseo_redirect_form").prepend('<div class="form_error error"><p>'+a+"</p></div>")},h.prototype.removeRowHighlights=function(){this.form.find(".redirect_form_row").removeClass("field_error")},h.prototype.highLightRowErrors=function(a){for(var b=0;b<a.length;b++)switch(a[b]){case"origin":this.highlightRow(this.getOriginField());break;case"target":this.highlightRow(this.getTargetField());break;case"type":this.highlightRow(this.getTypeField())}},h.prototype.highlightRow=function(a){jQuery(a).closest("div.redirect_form_row").addClass("field_error")};var i=function(a,b){this.form=a,this.type=b,this.validationError=""};i.prototype.validate=function(){return this.form.clearErrorMessage(),this.form.removeRowHighlights(),this.runValidation(this.form.getOriginField(),this.form.getTargetField(),this.form.getTypeField())!==!1||(this.addValidationError(this.validationError),!1)},i.prototype.runValidation=function(a,b,c){if(""===a.val())return this.form.highlightRow(a),"plain"===this.type?this.setError(wpseoPremiumStrings.error_old_url):this.setError(wpseoPremiumStrings.error_regex);if(jQuery.inArray(parseInt(c.val(),10),e)===-1){if(""===b.val())return this.form.highlightRow(b),this.setError(wpseoPremiumStrings.error_new_url);if(b.val()===a.val())return this.form.highlightRow(b),this.setError(wpseoPremiumStrings.error_circular)}return""!==c.val()||(this.form.highlightRow(c),this.setError(wpseoPremiumStrings.error_new_type))},i.prototype.setError=function(a){return this.validationError=a,!1},i.prototype.addValidationError=function(a,b){this.form.setErrorMessage(a),"undefined"!=typeof b&&this.form.highLightRowErrors(b)},i.prototype.getFormValues=function(){var a={origin:this.form.getOriginField().val().toString(),target:this.form.getTargetField().val().toString(),type:this.form.getTypeField().val().toString()};return jQuery.inArray(parseInt(a.type,10),e)>-1&&(a.target=""),a};var j=function(){this.row=null,this.quickEditRow=null};j.prototype.setup=function(b,c){this.row=b,this.quickEditRow=a(d({origin:_.unescape(c.origin.html()),target:_.unescape(c.target.html()),type:parseInt(c.type.html(),10),suffix:a("#the-list").find("tr").index(b)}))},j.prototype.getRow=function(){return this.row},j.prototype.getForm=function(){return this.quickEditRow},j.prototype.show=function(){this.row.addClass("hidden"),this.quickEditRow.insertAfter(this.row).show(400,function(){a(this).find(":input").first().focus()})},j.prototype.remove=function(){this.row.removeClass("hidden"),this.quickEditRow.remove()};var k=new j;a.widget("ui.dialog",a.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:function(a){this.close(a)}})}}),a.fn.wpseoRedirects=function(b){var c,d=this,j=b.replace("table-",""),l=!1,m=null,n=function(){l=!1,c=null};this.getButtons=function(b){return"default"===b?[{text:wpseoPremiumStrings.button_ok,click:function(){a(this).dialog("close")}}]:[{text:wpseoPremiumStrings.button_cancel,click:function(){n(),a(this).dialog("close")}},{text:wpseoPremiumStrings.button_save_anyway,class:"button-primary",click:function(){l=!0,c(),a(this).dialog("close"),n()}}]},this.rowCells=function(a){var b=a.find(".val");return{origin:b.eq(f.ORIGIN),target:b.eq(f.TARGET),type:b.eq(f.TYPE)}},this.dialog=function(b,c,d){"undefined"!=typeof d&&"error"!==d||(d="default");var e=this.getButtons(d);a("#YoastRedirectDialogText").html(c),a("#YoastRedirectDialog").dialog({title:b,width:500,draggable:!1,resizable:!1,position:{at:"center center",my:"center center",of:window},buttons:e,modal:!0,close:function(){m.focus()}})},this.openDialog=function(a){this.dialog(a.title,a.message)},this.post=function(b,c){a.post(ajaxurl,b,c,"json")},this.editRow=function(b){return a("#the-list").find("#inline-edit").length>0?void this.dialog(wpseoPremiumStrings.edit_redirect,wpseoPremiumStrings.editing_redirect):(k.setup(b,this.rowCells(b)),k.show(),void new h(k.quickEditRow).getTypeField().trigger("change"))},this.createRedirectRow=function(b,c,d,e){var f=["val"];e.isTargetRelative&&""!==c&&"/"!==c||f.push("remove-slashes"),e.hasTrailingSlash&&f.push("has-trailing-slash");var g=a("<tr>").append(a("<th>").addClass("check-column").attr("scope","row").append(a("<input>").attr("name","wpseo_redirects_bulk_delete[]").attr("type","checkbox").val(_.escape(b)))).append(a("<td>").addClass("type column-type has-row-actions column-primary").append(a("<div>").addClass("val type").html(_.escape(d))).append(a("<div>").addClass("row-actions").append(a("<span>").addClass("edit").append(a("<a>").attr({href:"#",role:"button",class:"redirect-edit"}).html(wpseoPremiumStrings.editAction)).append(" | ")).append(a("<span>").addClass("trash").append(a("<a>").attr({href:"#",role:"button",class:"redirect-delete"}).html(wpseoPremiumStrings.deleteAction))))).append(a("<td>").addClass("column-old").append(a("<div>").addClass("val").html(_.escape(b)))).append(a("<td>").addClass("column-new").append(a("<div>").addClass(f.join(" ")).html(_.escape(c))));return g},this.handleError=function(a,b){a.addValidationError(b.message,b.fields),"warning"===b.type&&d.dialog(wpseoPremiumStrings.error_saving_redirect,b.message,b.type)},this.addRedirect=function(){var b=new h(a(".wpseo-new-redirect-form")),c=new i(b,j);if(c.validate()===!1)return!1;var e=c.getFormValues();return d.post({action:"wpseo_add_redirect_"+j,ajax_nonce:a(".wpseo_redirects_ajax_nonce").val(),redirect:{origin:encodeURIComponent(e.origin),target:encodeURIComponent(e.target),type:e.type},ignore_warning:l},function(e){if(e.error)return d.handleError(c,e.error),!0;b.getOriginField().val(""),b.getTargetField().val(""),d.find(".no-items").remove();var f=d.createRedirectRow(e.origin,e.target,e.type,e.info);a("form#"+j).find("#the-list").prepend(f),d.openDialog(wpseoPremiumStrings.redirect_added)}),!0},this.updateRedirect=function(){var b=new h(k.getForm()),c=new i(b,j);if(c.validate()===!1)return!1;var e=c.getFormValues(),f=k.getRow(),g=this.rowCells(f);return d.post({action:"wpseo_update_redirect_"+j,ajax_nonce:a(".wpseo_redirects_ajax_nonce").val(),old_redirect:{origin:encodeURIComponent(g.origin.html()),target:encodeURIComponent(g.target.html()),type:encodeURIComponent(g.type.html())},new_redirect:{origin:encodeURIComponent(e.origin),target:encodeURIComponent(e.target),type:encodeURIComponent(e.type)},ignore_warning:l},function(a){return a.error?(d.handleError(c,a.error),!0):(g.origin.html(_.escape(a.origin)),g.target.html(_.escape(a.target)),g.type.html(_.escape(a.type)),k.remove(),void d.openDialog(wpseoPremiumStrings.redirect_updated))}),!0},this.deleteRedirect=function(b){var c=this.rowCells(b);d.post({action:"wpseo_delete_redirect_"+j,ajax_nonce:a(".wpseo_redirects_ajax_nonce").val(),redirect:{origin:encodeURIComponent(c.origin.html()),target:encodeURIComponent(c.target.html()),type:encodeURIComponent(c.type.html())}},function(){b.fadeTo("fast",0).slideUp(function(){a(this).remove()}),d.openDialog(wpseoPremiumStrings.redirect_deleted)})},this.setup=function(){var b;a("body").append('<div id="YoastRedirectDialog"><div id="YoastRedirectDialogText"></div></div>'),a(window).on("beforeunload",function(){if(a("#the-list").find("#inline-edit").length>0)return wpseoPremiumStrings.unsaved_redirects}),a(".redirect-table-tab").on("change","select[name=wpseo_redirects_type]",function(b){var c=parseInt(a(b.target).val(),10),d=a(b.target).closest(".wpseo_redirect_form").find(".wpseo_redirect_target_holder");jQuery.inArray(c,e)>-1?a(d).hide():a(d).show()}),a(".wpseo-new-redirect-form").on("click",".button-primary",function(){return c=function(){d.addRedirect()},d.addRedirect(),m=a(this),!1}).on("keypress","input",function(a){a.which===g.ENTER&&(c=function(){d.addRedirect()},a.preventDefault(),d.addRedirect())}),a(".wp-list-table").on("click",".redirect-edit",function(c){b=a(c.target).closest("tr"),c.preventDefault(),d.editRow(b),m=a(this)}).on("click",".redirect-delete",function(c){b=a(c.target).closest("tr"),c.preventDefault(),d.deleteRedirect(b),m=a("#cb-select-all-1")}).on("keypress","input",function(a){a.which===g.ENTER&&(c=function(){d.updateRedirect()},a.preventDefault(),d.updateRedirect())}).on("click",".save",function(){(c=function(){d.updateRedirect()})()}).on("click",".cancel",function(){c=null,k.remove(),b.find(".redirect-edit").focus()})},d.setup()},a(c)}(jQuery)},{}]},{},[1]);