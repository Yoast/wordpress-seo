(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

/* global ajaxurl */
/* jshint -W097 */

var redirectFunctions = require("./redirects/functions");

/**
 * Use notification counter so we can count how many times the function wpseo_show_notification is called.
 *
 * @type {number}
 */
var wpseo_notification_counter = 0;

/**
 * Show notification to user when there's a redirect created. When the response is empty, up the notification counter with 1, wait 100 ms and call function again.
 * Stop when the notification counter is bigger than 20.
 *
 * @returns {void}
 */
function wpseo_show_notification() {
	jQuery.post(ajaxurl, { action: "yoast_get_notifications" }, function (response) {
		if (response !== "") {
			var insertAfterElement = jQuery(".wrap").children().eq(0);
			jQuery(response).insertAfter(insertAfterElement);
			wpseo_notification_counter = 0;
		}

		if (wpseo_notification_counter < 20 && response === "") {
			wpseo_notification_counter++;
			setTimeout(wpseo_show_notification, 500);
		}
	});
}

window.wpseo_show_notification = wpseo_show_notification;

/**
 * Gets the current page based on the current URL.
 *
 * @returns {string} The current page.
 */
function wpseo_get_current_page() {
	return jQuery(location).attr("pathname").split("/").pop();
}

window.wpseo_get_current_page = wpseo_get_current_page;

/**
 * Gets the current slug of a post based on the current page and post or term being edited.
 *
 * @returns {string} The slug of the current post or term.
 */
function wpseo_get_current_slug() {
	var currentPost = wpseo_get_item_id();
	var currentPage = wpseo_get_current_page();

	if (currentPage === "edit.php") {
		return jQuery("#inline_" + currentPost).find(".post_name").html();
	}

	if (currentPage === "edit-tags.php") {
		return jQuery("#inline_" + currentPost).find(".slug").html();
	}

	return "";
}

window.wpseo_get_current_slug = wpseo_get_current_slug;

/**
 * Checks whether or not the slug has changed.
 *
 * @returns {boolean} Whether or not the slug has changed.
 */
function wpseo_slug_changed() {
	var editor = wpseo_get_active_editor();
	var currentSlug = wpseo_get_current_slug();
	var wpseo_new_slug = editor.find("input[name=post_name]").val();

	return currentSlug !== wpseo_new_slug;
}

window.wpseo_slug_changed = wpseo_slug_changed;

/**
 * Gets the currently active editor used in quick edit.
 *
 * @returns {Object} The editor that is currently active.
 */
function wpseo_get_active_editor() {
	return jQuery("tr.inline-editor");
}

window.wpseo_get_active_editor = wpseo_get_active_editor;

/**
 * Gets the current post or term id.
 * Returns an empty string if no editor is currently active.
 *
 * @returns {string} The ID of the current post or term.
 */
function wpseo_get_item_id() {
	var editor = wpseo_get_active_editor();

	if (editor === "") {
		return "";
	}

	return editor.attr("id").replace("edit-", "");
}

window.wpseo_get_item_id = wpseo_get_item_id;

/**
 * Handles the key-based events in the quick edit editor.
 *
 * @param {Event} ev The event currently being executed.
 *
 * @returns {void}
 */
function wpseo_handle_key_events(ev) {
	// 13 refers to the enter key.
	if (ev.which === 13 && wpseo_slug_changed()) {
		wpseo_show_notification();
	}
}

window.wpseo_handle_key_events = wpseo_handle_key_events;

/**
 * Handles the button-based events in the quick edit editor.
 *
 * @param {Event} ev The event currently being executed.
 *
 * @returns {void}
 */
function wpseo_handle_button_events(ev) {
	if (jQuery(ev.target).attr("id") !== "save-order" && wpseo_slug_changed()) {
		wpseo_show_notification();
	}
}

window.wpseo_handle_button_events = wpseo_handle_button_events;

window.wpseo_undo_redirect = redirectFunctions.wpseo_undo_redirect;
window.wpseo_create_redirect = redirectFunctions.wpseo_create_redirect;

jQuery(function () {
	var wpseoCurrentPage = wpseo_get_current_page();

	// If current page is edit*.php, continue execution.
	if (wpseoCurrentPage === "edit.php" || wpseoCurrentPage === "edit-tags.php") {
		jQuery("#inline-edit input").on("keydown", function (ev) {
			wpseo_handle_key_events(ev);
		});

		jQuery(".button-primary").click(function (ev) {
			wpseo_handle_button_events(ev);
		});
	}
});

},{"./redirects/functions":2}],2:[function(require,module,exports){
"use strict";

/* global wpseo_premium_strings, ajaxurl */

/**
 * Undoes a redirect.
 *
 * @param {string} origin The redirect's origin.
 * @param {string} target The redirect's target.
 * @param {string} type The type of redirect.
 * @param {string} nonce The nonce being used to validate the current AJAX request.
 * @param {object} source The DOMElement containing the alerts.
 *
 * @returns {void}
 */
function wpseo_undo_redirect(origin, target, type, nonce, source) {
	jQuery.post(ajaxurl, {
		action: "wpseo_delete_redirect_plain",
		ajax_nonce: nonce,
		redirect: {
			origin: origin,
			target: target,
			type: type
		}
	}, function () {
		jQuery(source).closest(".yoast-alert").fadeOut("slow");
	});
}

/**
 * Creates a redirect
 *
 * @param {string} origin The origin.
 * @param {string} type   The redirect type, regex or plain.
 * @param {string} nonce  The nonce.
 * @param {object} source The source of the redirect.
 *
 * @returns {void}
 */
function wpseo_create_redirect(origin, type, nonce, source) {
	var target = "";

	if (parseInt(type, 10) !== 410) {
		/* eslint-disable no-alert */
		target = window.prompt(wpseo_premium_strings.enter_new_url.replace("%s", origin));
		/* eslint-enable no-alert */

		if (target === '') {
			/* eslint-disable no-alert */
			window.alert(wpseo_premium_strings.error_new_url);
			/* eslint-enable no-alert */
			return;
		}
	}

	jQuery.post(ajaxurl, {
		action: "wpseo_add_redirect_plain",
		ajax_nonce: nonce,
		redirect: {
			origin: origin,
			target: target,
			type: type
		}
	}, function (response) {
		var notice = jQuery(source).closest(".yoast-alert");
		// Remove the classes first.
		jQuery(notice).removeClass("updated").removeClass("error");

		// Remove possibly added redirect errors.
		jQuery(notice).find(".redirect_error").remove();

		if (response.error) {
			// Add paragraph on top of the notice with actions and set class to error.
			jQuery(notice).addClass("error").prepend("<p class=\"redirect_error\">" + response.error.message + "</p>");

			return;
		}

		// Parse the success message.
		var successMessage = "";
		if (parseInt(type, 10) === 410) {
			successMessage = wpseo_premium_strings.redirect_saved_no_target;
		} else {
			successMessage = wpseo_premium_strings.redirect_saved.replace("%2$s", "<code>" + response.target + "</code>");
		}

		successMessage = successMessage.replace("%1$s", "<code>" + response.origin + "</code>");

		// Set class to updated and replace html with the success message.
		jQuery(notice).addClass("updated").html("<p>" + successMessage + "</p>");
	}, "json");
}

module.exports = {
	wpseo_create_redirect: wpseo_create_redirect,
	wpseo_undo_redirect: wpseo_undo_redirect
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvc3JjL3F1aWNrZWRpdC1ub3RpZmljYXRpb24uanMiLCJhc3NldHMvanMvc3JjL3JlZGlyZWN0cy9mdW5jdGlvbnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0FBQ0E7O0FBRUEsSUFBSSxvQkFBb0IsUUFBUyx1QkFBVCxDQUF4Qjs7QUFFQTs7Ozs7QUFLQSxJQUFJLDZCQUE2QixDQUFqQzs7QUFFQTs7Ozs7O0FBTUEsU0FBUyx1QkFBVCxHQUFtQztBQUNsQyxRQUFPLElBQVAsQ0FDQyxPQURELEVBRUMsRUFBRSxRQUFRLHlCQUFWLEVBRkQsRUFHQyxVQUFVLFFBQVYsRUFBcUI7QUFDcEIsTUFBSyxhQUFhLEVBQWxCLEVBQXVCO0FBQ3RCLE9BQUkscUJBQXFCLE9BQVEsT0FBUixFQUFrQixRQUFsQixHQUE2QixFQUE3QixDQUFpQyxDQUFqQyxDQUF6QjtBQUNBLFVBQVEsUUFBUixFQUFtQixXQUFuQixDQUFnQyxrQkFBaEM7QUFDQSxnQ0FBNkIsQ0FBN0I7QUFDQTs7QUFFRCxNQUFLLDZCQUE2QixFQUE3QixJQUFtQyxhQUFhLEVBQXJELEVBQTBEO0FBQ3pEO0FBQ0EsY0FBWSx1QkFBWixFQUFxQyxHQUFyQztBQUNBO0FBQ0QsRUFkRjtBQWdCQTs7QUFFRCxPQUFPLHVCQUFQLEdBQWlDLHVCQUFqQzs7QUFFQTs7Ozs7QUFLQSxTQUFTLHNCQUFULEdBQWtDO0FBQ2pDLFFBQU8sT0FBUSxRQUFSLEVBQW1CLElBQW5CLENBQXlCLFVBQXpCLEVBQXNDLEtBQXRDLENBQTZDLEdBQTdDLEVBQW1ELEdBQW5ELEVBQVA7QUFDQTs7QUFFRCxPQUFPLHNCQUFQLEdBQWdDLHNCQUFoQzs7QUFFQTs7Ozs7QUFLQSxTQUFTLHNCQUFULEdBQWtDO0FBQ2pDLEtBQUksY0FBYyxtQkFBbEI7QUFDQSxLQUFJLGNBQWMsd0JBQWxCOztBQUVBLEtBQUssZ0JBQWdC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LEVBQXNELFdBQVcsU0FBUyxNQUFwQixHQUE2QixTQUFuRixDQUFqQjtBQUNBOztBQUVELG1CQUFpQixlQUFlLE9BQWYsQ0FBd0IsTUFBeEIsRUFBZ0MsV0FBVyxTQUFTLE1BQXBCLEdBQTZCLFNBQTdELENBQWpCOztBQUVBO0FBQ0EsU0FBUSxNQUFSLEVBQ0UsUUFERixDQUNZLFNBRFosRUFFRSxJQUZGLENBRVEsUUFBUSxjQUFSLEdBQXlCLE1BRmpDO0FBR0EsRUE1Q0YsRUE2Q0MsTUE3Q0Q7QUErQ0E7O0FBRUQsT0FBTyxPQUFQLEdBQWlCO0FBQ2hCLHdCQUF1QixxQkFEUDtBQUVoQixzQkFBcUI7QUFGTCxDQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiBnbG9iYWwgYWpheHVybCAqL1xuLyoganNoaW50IC1XMDk3ICovXG5cbnZhciByZWRpcmVjdEZ1bmN0aW9ucyA9IHJlcXVpcmUoIFwiLi9yZWRpcmVjdHMvZnVuY3Rpb25zXCIgKTtcblxuLyoqXG4gKiBVc2Ugbm90aWZpY2F0aW9uIGNvdW50ZXIgc28gd2UgY2FuIGNvdW50IGhvdyBtYW55IHRpbWVzIHRoZSBmdW5jdGlvbiB3cHNlb19zaG93X25vdGlmaWNhdGlvbiBpcyBjYWxsZWQuXG4gKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIHdwc2VvX25vdGlmaWNhdGlvbl9jb3VudGVyID0gMDtcblxuLyoqXG4gKiBTaG93IG5vdGlmaWNhdGlvbiB0byB1c2VyIHdoZW4gdGhlcmUncyBhIHJlZGlyZWN0IGNyZWF0ZWQuIFdoZW4gdGhlIHJlc3BvbnNlIGlzIGVtcHR5LCB1cCB0aGUgbm90aWZpY2F0aW9uIGNvdW50ZXIgd2l0aCAxLCB3YWl0IDEwMCBtcyBhbmQgY2FsbCBmdW5jdGlvbiBhZ2Fpbi5cbiAqIFN0b3Agd2hlbiB0aGUgbm90aWZpY2F0aW9uIGNvdW50ZXIgaXMgYmlnZ2VyIHRoYW4gMjAuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHdwc2VvX3Nob3dfbm90aWZpY2F0aW9uKCkge1xuXHRqUXVlcnkucG9zdChcblx0XHRhamF4dXJsLFxuXHRcdHsgYWN0aW9uOiBcInlvYXN0X2dldF9ub3RpZmljYXRpb25zXCIgfSxcblx0XHRmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHRpZiAoIHJlc3BvbnNlICE9PSBcIlwiICkge1xuXHRcdFx0XHR2YXIgaW5zZXJ0QWZ0ZXJFbGVtZW50ID0galF1ZXJ5KCBcIi53cmFwXCIgKS5jaGlsZHJlbigpLmVxKCAwICk7XG5cdFx0XHRcdGpRdWVyeSggcmVzcG9uc2UgKS5pbnNlcnRBZnRlciggaW5zZXJ0QWZ0ZXJFbGVtZW50ICk7XG5cdFx0XHRcdHdwc2VvX25vdGlmaWNhdGlvbl9jb3VudGVyID0gMDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3cHNlb19ub3RpZmljYXRpb25fY291bnRlciA8IDIwICYmIHJlc3BvbnNlID09PSBcIlwiICkge1xuXHRcdFx0XHR3cHNlb19ub3RpZmljYXRpb25fY291bnRlcisrO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCB3cHNlb19zaG93X25vdGlmaWNhdGlvbiwgNTAwICk7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufVxuXG53aW5kb3cud3BzZW9fc2hvd19ub3RpZmljYXRpb24gPSB3cHNlb19zaG93X25vdGlmaWNhdGlvbjtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHBhZ2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgVVJMLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IHBhZ2UuXG4gKi9cbmZ1bmN0aW9uIHdwc2VvX2dldF9jdXJyZW50X3BhZ2UoKSB7XG5cdHJldHVybiBqUXVlcnkoIGxvY2F0aW9uICkuYXR0ciggXCJwYXRobmFtZVwiICkuc3BsaXQoIFwiL1wiICkucG9wKCk7XG59XG5cbndpbmRvdy53cHNlb19nZXRfY3VycmVudF9wYWdlID0gd3BzZW9fZ2V0X2N1cnJlbnRfcGFnZTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHNsdWcgb2YgYSBwb3N0IGJhc2VkIG9uIHRoZSBjdXJyZW50IHBhZ2UgYW5kIHBvc3Qgb3IgdGVybSBiZWluZyBlZGl0ZWQuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHNsdWcgb2YgdGhlIGN1cnJlbnQgcG9zdCBvciB0ZXJtLlxuICovXG5mdW5jdGlvbiB3cHNlb19nZXRfY3VycmVudF9zbHVnKCkge1xuXHR2YXIgY3VycmVudFBvc3QgPSB3cHNlb19nZXRfaXRlbV9pZCgpO1xuXHR2YXIgY3VycmVudFBhZ2UgPSB3cHNlb19nZXRfY3VycmVudF9wYWdlKCk7XG5cblx0aWYgKCBjdXJyZW50UGFnZSA9PT0gXCJlZGl0LnBocFwiICkge1xuXHRcdHJldHVybiBqUXVlcnkoIFwiI2lubGluZV9cIiArIGN1cnJlbnRQb3N0ICkuZmluZCggXCIucG9zdF9uYW1lXCIgKS5odG1sKCk7XG5cdH1cblxuXHRpZiAoIGN1cnJlbnRQYWdlID09PSBcImVkaXQtdGFncy5waHBcIiApIHtcblx0XHRyZXR1cm4galF1ZXJ5KCBcIiNpbmxpbmVfXCIgKyBjdXJyZW50UG9zdCApLmZpbmQoIFwiLnNsdWdcIiApLmh0bWwoKTtcblx0fVxuXG5cdHJldHVybiBcIlwiO1xufVxuXG53aW5kb3cud3BzZW9fZ2V0X2N1cnJlbnRfc2x1ZyA9IHdwc2VvX2dldF9jdXJyZW50X3NsdWc7XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoZSBzbHVnIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgc2x1ZyBoYXMgY2hhbmdlZC5cbiAqL1xuZnVuY3Rpb24gd3BzZW9fc2x1Z19jaGFuZ2VkKCkge1xuXHR2YXIgZWRpdG9yID0gd3BzZW9fZ2V0X2FjdGl2ZV9lZGl0b3IoKTtcblx0dmFyIGN1cnJlbnRTbHVnID0gd3BzZW9fZ2V0X2N1cnJlbnRfc2x1ZygpO1xuXHR2YXIgd3BzZW9fbmV3X3NsdWcgPSAgZWRpdG9yLmZpbmQoIFwiaW5wdXRbbmFtZT1wb3N0X25hbWVdXCIgKS52YWwoKTtcblxuXHRyZXR1cm4gY3VycmVudFNsdWcgIT09IHdwc2VvX25ld19zbHVnO1xufVxuXG53aW5kb3cud3BzZW9fc2x1Z19jaGFuZ2VkID0gd3BzZW9fc2x1Z19jaGFuZ2VkO1xuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnRseSBhY3RpdmUgZWRpdG9yIHVzZWQgaW4gcXVpY2sgZWRpdC5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgZWRpdG9yIHRoYXQgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAqL1xuZnVuY3Rpb24gd3BzZW9fZ2V0X2FjdGl2ZV9lZGl0b3IoKSB7XG5cdHJldHVybiBqUXVlcnkoIFwidHIuaW5saW5lLWVkaXRvclwiICk7XG59XG5cbndpbmRvdy53cHNlb19nZXRfYWN0aXZlX2VkaXRvciA9IHdwc2VvX2dldF9hY3RpdmVfZWRpdG9yO1xuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgcG9zdCBvciB0ZXJtIGlkLlxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgbm8gZWRpdG9yIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIElEIG9mIHRoZSBjdXJyZW50IHBvc3Qgb3IgdGVybS5cbiAqL1xuZnVuY3Rpb24gd3BzZW9fZ2V0X2l0ZW1faWQoKSB7XG5cdHZhciBlZGl0b3IgPSB3cHNlb19nZXRfYWN0aXZlX2VkaXRvcigpO1xuXG5cdGlmICggZWRpdG9yID09PSBcIlwiICkge1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cblx0cmV0dXJuIGVkaXRvci5hdHRyKCBcImlkXCIgKS5yZXBsYWNlKCBcImVkaXQtXCIsIFwiXCIgKTtcbn1cblxud2luZG93Lndwc2VvX2dldF9pdGVtX2lkID0gd3BzZW9fZ2V0X2l0ZW1faWQ7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUga2V5LWJhc2VkIGV2ZW50cyBpbiB0aGUgcXVpY2sgZWRpdCBlZGl0b3IuXG4gKlxuICogQHBhcmFtIHtFdmVudH0gZXYgVGhlIGV2ZW50IGN1cnJlbnRseSBiZWluZyBleGVjdXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gd3BzZW9faGFuZGxlX2tleV9ldmVudHMoIGV2ICkge1xuXHQvLyAxMyByZWZlcnMgdG8gdGhlIGVudGVyIGtleS5cblx0aWYgKCBldi53aGljaCA9PT0gMTMgJiYgd3BzZW9fc2x1Z19jaGFuZ2VkKCkgKSB7XG5cdFx0d3BzZW9fc2hvd19ub3RpZmljYXRpb24oKTtcblx0fVxufVxuXG53aW5kb3cud3BzZW9faGFuZGxlX2tleV9ldmVudHMgPSB3cHNlb19oYW5kbGVfa2V5X2V2ZW50cztcblxuLyoqXG4gKiBIYW5kbGVzIHRoZSBidXR0b24tYmFzZWQgZXZlbnRzIGluIHRoZSBxdWljayBlZGl0IGVkaXRvci5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBldiBUaGUgZXZlbnQgY3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3cHNlb19oYW5kbGVfYnV0dG9uX2V2ZW50cyggZXYgKSB7XG5cdGlmICggalF1ZXJ5KCBldi50YXJnZXQgKS5hdHRyKCBcImlkXCIgKSAhPT0gXCJzYXZlLW9yZGVyXCIgJiYgd3BzZW9fc2x1Z19jaGFuZ2VkKCkgKSB7XG5cdFx0d3BzZW9fc2hvd19ub3RpZmljYXRpb24oKTtcblx0fVxufVxuXG53aW5kb3cud3BzZW9faGFuZGxlX2J1dHRvbl9ldmVudHMgPSB3cHNlb19oYW5kbGVfYnV0dG9uX2V2ZW50cztcblxud2luZG93Lndwc2VvX3VuZG9fcmVkaXJlY3QgPSByZWRpcmVjdEZ1bmN0aW9ucy53cHNlb191bmRvX3JlZGlyZWN0O1xud2luZG93Lndwc2VvX2NyZWF0ZV9yZWRpcmVjdCA9IHJlZGlyZWN0RnVuY3Rpb25zLndwc2VvX2NyZWF0ZV9yZWRpcmVjdDtcblxuKCBqUXVlcnkoIGZ1bmN0aW9uKCkge1xuXHR2YXIgd3BzZW9DdXJyZW50UGFnZSA9IHdwc2VvX2dldF9jdXJyZW50X3BhZ2UoKTtcblxuXHQvLyBJZiBjdXJyZW50IHBhZ2UgaXMgZWRpdCoucGhwLCBjb250aW51ZSBleGVjdXRpb24uXG5cdGlmICggd3BzZW9DdXJyZW50UGFnZSA9PT0gXCJlZGl0LnBocFwiIHx8IHdwc2VvQ3VycmVudFBhZ2UgPT09IFwiZWRpdC10YWdzLnBocFwiICkge1xuXHRcdGpRdWVyeSggXCIjaW5saW5lLWVkaXQgaW5wdXRcIiApLm9uKCBcImtleWRvd25cIiwgZnVuY3Rpb24oIGV2ICkge1xuXHRcdFx0d3BzZW9faGFuZGxlX2tleV9ldmVudHMoIGV2ICk7XG5cdFx0fSApO1xuXG5cdFx0alF1ZXJ5KCBcIi5idXR0b24tcHJpbWFyeVwiICkuY2xpY2soIGZ1bmN0aW9uKCBldiApIHtcblx0XHRcdHdwc2VvX2hhbmRsZV9idXR0b25fZXZlbnRzKCBldiApO1xuXHRcdH0gKTtcblx0fVxufSApICk7XG4iLCIvKiBnbG9iYWwgd3BzZW9fcHJlbWl1bV9zdHJpbmdzLCBhamF4dXJsICovXG5cbi8qKlxuICogVW5kb2VzIGEgcmVkaXJlY3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbiBUaGUgcmVkaXJlY3QncyBvcmlnaW4uXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0IFRoZSByZWRpcmVjdCdzIHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIHJlZGlyZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IG5vbmNlIFRoZSBub25jZSBiZWluZyB1c2VkIHRvIHZhbGlkYXRlIHRoZSBjdXJyZW50IEFKQVggcmVxdWVzdC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBzb3VyY2UgVGhlIERPTUVsZW1lbnQgY29udGFpbmluZyB0aGUgYWxlcnRzLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3cHNlb191bmRvX3JlZGlyZWN0KCBvcmlnaW4sIHRhcmdldCwgdHlwZSwgbm9uY2UsIHNvdXJjZSApIHtcblx0alF1ZXJ5LnBvc3QoXG5cdFx0YWpheHVybCxcblx0XHR7XG5cdFx0XHRhY3Rpb246IFwid3BzZW9fZGVsZXRlX3JlZGlyZWN0X3BsYWluXCIsXG5cdFx0XHRhamF4X25vbmNlOiBub25jZSxcblx0XHRcdHJlZGlyZWN0OiB7XG5cdFx0XHRcdG9yaWdpbjogb3JpZ2luLFxuXHRcdFx0XHR0YXJnZXQ6IHRhcmdldCxcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHRmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeSggc291cmNlICkuY2xvc2VzdCggXCIueW9hc3QtYWxlcnRcIiApLmZhZGVPdXQoIFwic2xvd1wiICk7XG5cdFx0fVxuXHQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSByZWRpcmVjdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW4gVGhlIG9yaWdpbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlICAgVGhlIHJlZGlyZWN0IHR5cGUsIHJlZ2V4IG9yIHBsYWluLlxuICogQHBhcmFtIHtzdHJpbmd9IG5vbmNlICBUaGUgbm9uY2UuXG4gKiBAcGFyYW0ge29iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2YgdGhlIHJlZGlyZWN0LlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3cHNlb19jcmVhdGVfcmVkaXJlY3QoIG9yaWdpbiwgdHlwZSwgbm9uY2UsIHNvdXJjZSApIHtcblx0dmFyIHRhcmdldCA9IFwiXCI7XG5cblx0aWYoIHBhcnNlSW50KCB0eXBlLCAxMCApICE9PSA0MTAgKSB7XG5cdFx0LyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQgKi9cblx0XHR0YXJnZXQgPSB3aW5kb3cucHJvbXB0KCB3cHNlb19wcmVtaXVtX3N0cmluZ3MuZW50ZXJfbmV3X3VybC5yZXBsYWNlKCBcIiVzXCIsIG9yaWdpbiApICk7XG5cdFx0LyogZXNsaW50LWVuYWJsZSBuby1hbGVydCAqL1xuXG5cdFx0aWYgKCB0YXJnZXQgPT09ICcnICkge1xuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQgKi9cblx0XHRcdHdpbmRvdy5hbGVydCggd3BzZW9fcHJlbWl1bV9zdHJpbmdzLmVycm9yX25ld191cmwgKTtcblx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tYWxlcnQgKi9cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkucG9zdChcblx0XHRhamF4dXJsLFxuXHRcdHtcblx0XHRcdGFjdGlvbjogXCJ3cHNlb19hZGRfcmVkaXJlY3RfcGxhaW5cIixcblx0XHRcdGFqYXhfbm9uY2U6IG5vbmNlLFxuXHRcdFx0cmVkaXJlY3Q6IHtcblx0XHRcdFx0b3JpZ2luOiBvcmlnaW4sXG5cdFx0XHRcdHRhcmdldDogdGFyZ2V0LFxuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdHZhciBub3RpY2UgPSBqUXVlcnkoIHNvdXJjZSApLmNsb3Nlc3QoIFwiLnlvYXN0LWFsZXJ0XCIgKTtcblx0XHRcdC8vIFJlbW92ZSB0aGUgY2xhc3NlcyBmaXJzdC5cblx0XHRcdGpRdWVyeSggbm90aWNlIClcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVwZGF0ZWRcIiApXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJlcnJvclwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBwb3NzaWJseSBhZGRlZCByZWRpcmVjdCBlcnJvcnMuXG5cdFx0XHRqUXVlcnkoIG5vdGljZSApLmZpbmQoIFwiLnJlZGlyZWN0X2Vycm9yXCIgKS5yZW1vdmUoKTtcblxuXHRcdFx0aWYoIHJlc3BvbnNlLmVycm9yICkge1xuXHRcdFx0XHQvLyBBZGQgcGFyYWdyYXBoIG9uIHRvcCBvZiB0aGUgbm90aWNlIHdpdGggYWN0aW9ucyBhbmQgc2V0IGNsYXNzIHRvIGVycm9yLlxuXHRcdFx0XHRqUXVlcnkoIG5vdGljZSApXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcImVycm9yXCIgKVxuXHRcdFx0XHRcdC5wcmVwZW5kKCBcIjxwIGNsYXNzPVxcXCJyZWRpcmVjdF9lcnJvclxcXCI+XCIgKyByZXNwb25zZS5lcnJvci5tZXNzYWdlICsgXCI8L3A+XCIgKTtcblxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhcnNlIHRoZSBzdWNjZXNzIG1lc3NhZ2UuXG5cdFx0XHR2YXIgc3VjY2Vzc01lc3NhZ2UgPSBcIlwiO1xuXHRcdFx0aWYoIHBhcnNlSW50KCB0eXBlLCAxMCApID09PSA0MTAgKSB7XG5cdFx0XHRcdHN1Y2Nlc3NNZXNzYWdlID0gd3BzZW9fcHJlbWl1bV9zdHJpbmdzLnJlZGlyZWN0X3NhdmVkX25vX3RhcmdldDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN1Y2Nlc3NNZXNzYWdlID0gd3BzZW9fcHJlbWl1bV9zdHJpbmdzLnJlZGlyZWN0X3NhdmVkLnJlcGxhY2UoIFwiJTIkc1wiLCBcIjxjb2RlPlwiICsgcmVzcG9uc2UudGFyZ2V0ICsgXCI8L2NvZGU+XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0c3VjY2Vzc01lc3NhZ2UgPSBzdWNjZXNzTWVzc2FnZS5yZXBsYWNlKCBcIiUxJHNcIiwgXCI8Y29kZT5cIiArIHJlc3BvbnNlLm9yaWdpbiArIFwiPC9jb2RlPlwiICk7XG5cblx0XHRcdC8vIFNldCBjbGFzcyB0byB1cGRhdGVkIGFuZCByZXBsYWNlIGh0bWwgd2l0aCB0aGUgc3VjY2VzcyBtZXNzYWdlLlxuXHRcdFx0alF1ZXJ5KCBub3RpY2UgKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidXBkYXRlZFwiIClcblx0XHRcdFx0Lmh0bWwoIFwiPHA+XCIgKyBzdWNjZXNzTWVzc2FnZSArIFwiPC9wPlwiICk7XG5cdFx0fSxcblx0XHRcImpzb25cIlxuXHQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0d3BzZW9fY3JlYXRlX3JlZGlyZWN0OiB3cHNlb19jcmVhdGVfcmVkaXJlY3QsXG5cdHdwc2VvX3VuZG9fcmVkaXJlY3Q6IHdwc2VvX3VuZG9fcmVkaXJlY3QsXG59O1xuIl19
