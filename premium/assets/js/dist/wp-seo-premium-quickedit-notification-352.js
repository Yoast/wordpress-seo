(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

/* global ajaxurl */
/* jshint -W097 */

var redirectFunctions = require("./redirects/functions");

/**
 * Use notification counter so we can count how many times the function wpseo_show_notification is called.
 *
 * @type {number}
 */
var wpseo_notification_counter = 0;

/**
 * Show notification to user when there's a redirect created. When the response is empty, up the notification counter with 1, wait 100 ms and call function again.
 * Stop when the notification counter is bigger than 20.
 *
 * @returns {void}
 */
function wpseo_show_notification() {
	jQuery.post(ajaxurl, { action: "yoast_get_notifications" }, function (response) {
		if (response !== "") {
			var insertAfterElement = jQuery(".wrap").children().eq(0);
			jQuery(response).insertAfter(insertAfterElement);
			wpseo_notification_counter = 0;
		}

		if (wpseo_notification_counter < 20 && response === "") {
			wpseo_notification_counter++;
			setTimeout(wpseo_show_notification, 500);
		}
	});
}

window.wpseo_show_notification = wpseo_show_notification;

/**
 * Gets the current page based on the current URL.
 *
 * @returns {string} The current page.
 */
function wpseo_get_current_page() {
	return jQuery(location).attr("pathname").split("/").pop();
}

window.wpseo_get_current_page = wpseo_get_current_page;

/**
 * Gets the current slug of a post based on the current page and post or term being edited.
 *
 * @returns {string} The slug of the current post or term.
 */
function wpseo_get_current_slug() {
	var currentPost = wpseo_get_item_id();
	var currentPage = wpseo_get_current_page();

	if (currentPage === "edit.php") {
		return jQuery("#inline_" + currentPost).find(".post_name").html();
	}

	if (currentPage === "edit-tags.php") {
		return jQuery("#inline_" + currentPost).find(".slug").html();
	}

	return "";
}

window.wpseo_get_current_slug = wpseo_get_current_slug;

/**
 * Checks whether or not the slug has changed.
 *
 * @returns {boolean} Whether or not the slug has changed.
 */
function wpseo_slug_changed() {
	var editor = wpseo_get_active_editor();
	var currentSlug = wpseo_get_current_slug();
	var wpseo_new_slug = editor.find("input[name=post_name]").val();

	return currentSlug !== wpseo_new_slug;
}

window.wpseo_slug_changed = wpseo_slug_changed;

/**
 * Gets the currently active editor used in quick edit.
 *
 * @returns {Object} The editor that is currently active.
 */
function wpseo_get_active_editor() {
	return jQuery("tr.inline-editor");
}

window.wpseo_get_active_editor = wpseo_get_active_editor;

/**
 * Gets the current post or term id.
 * Returns an empty string if no editor is currently active.
 *
 * @returns {string} The ID of the current post or term.
 */
function wpseo_get_item_id() {
	var editor = wpseo_get_active_editor();

	if (editor === "") {
		return "";
	}

	return editor.attr("id").replace("edit-", "");
}

window.wpseo_get_item_id = wpseo_get_item_id;

/**
 * Handles the key-based events in the quick edit editor.
 *
 * @param {Event} ev The event currently being executed.
 *
 * @returns {void}
 */
function wpseo_handle_key_events(ev) {
	// 13 refers to the enter key.
	if (ev.which === 13 && wpseo_slug_changed()) {
		wpseo_show_notification();
	}
}

window.wpseo_handle_key_events = wpseo_handle_key_events;

/**
 * Handles the button-based events in the quick edit editor.
 *
 * @param {Event} ev The event currently being executed.
 *
 * @returns {void}
 */
function wpseo_handle_button_events(ev) {
	if (jQuery(ev.target).attr("id") !== "save-order" && wpseo_slug_changed()) {
		wpseo_show_notification();
	}
}

window.wpseo_handle_button_events = wpseo_handle_button_events;

window.wpseo_undo_redirect = redirectFunctions.wpseo_undo_redirect;
window.wpseo_create_redirect = redirectFunctions.wpseo_create_redirect;

jQuery(function () {
	var wpseoCurrentPage = wpseo_get_current_page();

	// If current page is edit*.php, continue execution.
	if (wpseoCurrentPage === "edit.php" || wpseoCurrentPage === "edit-tags.php") {
		jQuery("#inline-edit input").on("keydown", function (ev) {
			wpseo_handle_key_events(ev);
		});

		jQuery(".button-primary").click(function (ev) {
			wpseo_handle_button_events(ev);
		});
	}
});

},{"./redirects/functions":2}],2:[function(require,module,exports){
"use strict";

/* global wpseo_premium_strings, ajaxurl */

/**
 * Undoes a redirect.
 *
 * @param {string} origin The redirect's origin.
 * @param {string} target The redirect's target.
 * @param {string} type The type of redirect.
 * @param {string} nonce The nonce being used to validate the current AJAX request.
 * @param {object} source The DOMElement containing the alerts.
 *
 * @returns {void}
 */
function wpseo_undo_redirect(origin, target, type, nonce, source) {
	jQuery.post(ajaxurl, {
		action: "wpseo_delete_redirect_plain",
		ajax_nonce: nonce,
		redirect: {
			origin: origin,
			target: target,
			type: type
		}
	}, function () {
		jQuery(source).closest(".yoast-alert").fadeOut("slow");
	});
}

/**
 * Creates a redirect
 *
 * @param {string} origin The origin.
 * @param {string} type   The redirect type, regex or plain.
 * @param {string} nonce  The nonce.
 * @param {object} source The source of the redirect.
 *
 * @returns {void}
 */
function wpseo_create_redirect(origin, type, nonce, source) {
	var target = "";

	if (parseInt(type, 10) !== 410) {
		/* eslint-disable no-alert */
		target = window.prompt(wpseo_premium_strings.enter_new_url.replace("%s", origin));
		/* eslint-enable no-alert */

		if (target === '') {
			/* eslint-disable no-alert */
			window.alert(wpseo_premium_strings.error_new_url);
			/* eslint-enable no-alert */
			return;
		}
	}

	jQuery.post(ajaxurl, {
		action: "wpseo_add_redirect_plain",
		ajax_nonce: nonce,
		redirect: {
			origin: origin,
			target: target,
			type: type
		}
	}, function (response) {
		var notice = jQuery(source).closest(".yoast-alert");
		// Remove the classes first.
		jQuery(notice).removeClass("updated").removeClass("error");

		// Remove possibly added redirect errors.
		jQuery(notice).find(".redirect_error").remove();

		if (response.error) {
			// Add paragraph on top of the notice with actions and set class to error.
			jQuery(notice).addClass("error").prepend("<p class=\"redirect_error\">" + response.error.message + "</p>");

			return;
		}

		// Parse the success message.
		var successMessage = "";
		if (parseInt(type, 10) === 410) {
			successMessage = wpseo_premium_strings.redirect_saved_no_target;
		} else {
			successMessage = wpseo_premium_strings.redirect_saved.replace("%2$s", "<code>" + response.target + "</code>");
		}

		successMessage = successMessage.replace("%1$s", "<code>" + response.origin + "</code>");

		// Set class to updated and replace html with the success message.
		jQuery(notice).addClass("updated").html("<p>" + successMessage + "</p>");
	}, "json");
}

module.exports = {
	wpseo_create_redirect: wpseo_create_redirect,
	wpseo_undo_redirect: wpseo_undo_redirect
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHNcXGpzXFxzcmNcXHF1aWNrZWRpdC1ub3RpZmljYXRpb24uanMiLCJhc3NldHNcXGpzXFxzcmNcXHJlZGlyZWN0c1xcZnVuY3Rpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTtBQUNBOztBQUVBLElBQUksb0JBQW9CLFFBQVMsdUJBQVQsQ0FBeEI7O0FBRUE7Ozs7O0FBS0EsSUFBSSw2QkFBNkIsQ0FBakM7O0FBRUE7Ozs7OztBQU1BLFNBQVMsdUJBQVQsR0FBbUM7QUFDbEMsUUFBTyxJQUFQLENBQ0MsT0FERCxFQUVDLEVBQUUsUUFBUSx5QkFBVixFQUZELEVBR0MsVUFBVSxRQUFWLEVBQXFCO0FBQ3BCLE1BQUssYUFBYSxFQUFsQixFQUF1QjtBQUN0QixPQUFJLHFCQUFxQixPQUFRLE9BQVIsRUFBa0IsUUFBbEIsR0FBNkIsRUFBN0IsQ0FBaUMsQ0FBakMsQ0FBekI7QUFDQSxVQUFRLFFBQVIsRUFBbUIsV0FBbkIsQ0FBZ0Msa0JBQWhDO0FBQ0EsZ0NBQTZCLENBQTdCO0FBQ0E7O0FBRUQsTUFBSyw2QkFBNkIsRUFBN0IsSUFBbUMsYUFBYSxFQUFyRCxFQUEwRDtBQUN6RDtBQUNBLGNBQVksdUJBQVosRUFBcUMsR0FBckM7QUFDQTtBQUNELEVBZEY7QUFnQkE7O0FBRUQsT0FBTyx1QkFBUCxHQUFpQyx1QkFBakM7O0FBRUE7Ozs7O0FBS0EsU0FBUyxzQkFBVCxHQUFrQztBQUNqQyxRQUFPLE9BQVEsUUFBUixFQUFtQixJQUFuQixDQUF5QixVQUF6QixFQUFzQyxLQUF0QyxDQUE2QyxHQUE3QyxFQUFtRCxHQUFuRCxFQUFQO0FBQ0E7O0FBRUQsT0FBTyxzQkFBUCxHQUFnQyxzQkFBaEM7O0FBRUE7Ozs7O0FBS0EsU0FBUyxzQkFBVCxHQUFrQztBQUNqQyxLQUFJLGNBQWMsbUJBQWxCO0FBQ0EsS0FBSSxjQUFjLHdCQUFsQjs7QUFFQSxLQUFL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QyxNQUE5QyxFQUFzRCxXQUFXLFNBQVMsTUFBcEIsR0FBNkIsU0FBbkYsQ0FBakI7QUFDQTs7QUFFRCxtQkFBaUIsZUFBZSxPQUFmLENBQXdCLE1BQXhCLEVBQWdDLFdBQVcsU0FBUyxNQUFwQixHQUE2QixTQUE3RCxDQUFqQjs7QUFFQTtBQUNBLFNBQVEsTUFBUixFQUNFLFFBREYsQ0FDWSxTQURaLEVBRUUsSUFGRixDQUVRLFFBQVEsY0FBUixHQUF5QixNQUZqQztBQUdBLEVBNUNGLEVBNkNDLE1BN0NEO0FBK0NBOztBQUVELE9BQU8sT0FBUCxHQUFpQjtBQUNoQix3QkFBdUIscUJBRFA7QUFFaEIsc0JBQXFCO0FBRkwsQ0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyogZ2xvYmFsIGFqYXh1cmwgKi9cclxuLyoganNoaW50IC1XMDk3ICovXHJcblxyXG52YXIgcmVkaXJlY3RGdW5jdGlvbnMgPSByZXF1aXJlKCBcIi4vcmVkaXJlY3RzL2Z1bmN0aW9uc1wiICk7XHJcblxyXG4vKipcclxuICogVXNlIG5vdGlmaWNhdGlvbiBjb3VudGVyIHNvIHdlIGNhbiBjb3VudCBob3cgbWFueSB0aW1lcyB0aGUgZnVuY3Rpb24gd3BzZW9fc2hvd19ub3RpZmljYXRpb24gaXMgY2FsbGVkLlxyXG4gKlxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxudmFyIHdwc2VvX25vdGlmaWNhdGlvbl9jb3VudGVyID0gMDtcclxuXHJcbi8qKlxyXG4gKiBTaG93IG5vdGlmaWNhdGlvbiB0byB1c2VyIHdoZW4gdGhlcmUncyBhIHJlZGlyZWN0IGNyZWF0ZWQuIFdoZW4gdGhlIHJlc3BvbnNlIGlzIGVtcHR5LCB1cCB0aGUgbm90aWZpY2F0aW9uIGNvdW50ZXIgd2l0aCAxLCB3YWl0IDEwMCBtcyBhbmQgY2FsbCBmdW5jdGlvbiBhZ2Fpbi5cclxuICogU3RvcCB3aGVuIHRoZSBub3RpZmljYXRpb24gY291bnRlciBpcyBiaWdnZXIgdGhhbiAyMC5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19zaG93X25vdGlmaWNhdGlvbigpIHtcclxuXHRqUXVlcnkucG9zdChcclxuXHRcdGFqYXh1cmwsXHJcblx0XHR7IGFjdGlvbjogXCJ5b2FzdF9nZXRfbm90aWZpY2F0aW9uc1wiIH0sXHJcblx0XHRmdW5jdGlvbiggcmVzcG9uc2UgKSB7XHJcblx0XHRcdGlmICggcmVzcG9uc2UgIT09IFwiXCIgKSB7XHJcblx0XHRcdFx0dmFyIGluc2VydEFmdGVyRWxlbWVudCA9IGpRdWVyeSggXCIud3JhcFwiICkuY2hpbGRyZW4oKS5lcSggMCApO1xyXG5cdFx0XHRcdGpRdWVyeSggcmVzcG9uc2UgKS5pbnNlcnRBZnRlciggaW5zZXJ0QWZ0ZXJFbGVtZW50ICk7XHJcblx0XHRcdFx0d3BzZW9fbm90aWZpY2F0aW9uX2NvdW50ZXIgPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHdwc2VvX25vdGlmaWNhdGlvbl9jb3VudGVyIDwgMjAgJiYgcmVzcG9uc2UgPT09IFwiXCIgKSB7XHJcblx0XHRcdFx0d3BzZW9fbm90aWZpY2F0aW9uX2NvdW50ZXIrKztcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCB3cHNlb19zaG93X25vdGlmaWNhdGlvbiwgNTAwICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHQpO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fc2hvd19ub3RpZmljYXRpb24gPSB3cHNlb19zaG93X25vdGlmaWNhdGlvbjtcclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjdXJyZW50IHBhZ2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgVVJMLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY3VycmVudCBwYWdlLlxyXG4gKi9cclxuZnVuY3Rpb24gd3BzZW9fZ2V0X2N1cnJlbnRfcGFnZSgpIHtcclxuXHRyZXR1cm4galF1ZXJ5KCBsb2NhdGlvbiApLmF0dHIoIFwicGF0aG5hbWVcIiApLnNwbGl0KCBcIi9cIiApLnBvcCgpO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fZ2V0X2N1cnJlbnRfcGFnZSA9IHdwc2VvX2dldF9jdXJyZW50X3BhZ2U7XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgY3VycmVudCBzbHVnIG9mIGEgcG9zdCBiYXNlZCBvbiB0aGUgY3VycmVudCBwYWdlIGFuZCBwb3N0IG9yIHRlcm0gYmVpbmcgZWRpdGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc2x1ZyBvZiB0aGUgY3VycmVudCBwb3N0IG9yIHRlcm0uXHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19nZXRfY3VycmVudF9zbHVnKCkge1xyXG5cdHZhciBjdXJyZW50UG9zdCA9IHdwc2VvX2dldF9pdGVtX2lkKCk7XHJcblx0dmFyIGN1cnJlbnRQYWdlID0gd3BzZW9fZ2V0X2N1cnJlbnRfcGFnZSgpO1xyXG5cclxuXHRpZiAoIGN1cnJlbnRQYWdlID09PSBcImVkaXQucGhwXCIgKSB7XHJcblx0XHRyZXR1cm4galF1ZXJ5KCBcIiNpbmxpbmVfXCIgKyBjdXJyZW50UG9zdCApLmZpbmQoIFwiLnBvc3RfbmFtZVwiICkuaHRtbCgpO1xyXG5cdH1cclxuXHJcblx0aWYgKCBjdXJyZW50UGFnZSA9PT0gXCJlZGl0LXRhZ3MucGhwXCIgKSB7XHJcblx0XHRyZXR1cm4galF1ZXJ5KCBcIiNpbmxpbmVfXCIgKyBjdXJyZW50UG9zdCApLmZpbmQoIFwiLnNsdWdcIiApLmh0bWwoKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBcIlwiO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fZ2V0X2N1cnJlbnRfc2x1ZyA9IHdwc2VvX2dldF9jdXJyZW50X3NsdWc7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoZSBzbHVnIGhhcyBjaGFuZ2VkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIHNsdWcgaGFzIGNoYW5nZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19zbHVnX2NoYW5nZWQoKSB7XHJcblx0dmFyIGVkaXRvciA9IHdwc2VvX2dldF9hY3RpdmVfZWRpdG9yKCk7XHJcblx0dmFyIGN1cnJlbnRTbHVnID0gd3BzZW9fZ2V0X2N1cnJlbnRfc2x1ZygpO1xyXG5cdHZhciB3cHNlb19uZXdfc2x1ZyA9ICBlZGl0b3IuZmluZCggXCJpbnB1dFtuYW1lPXBvc3RfbmFtZV1cIiApLnZhbCgpO1xyXG5cclxuXHRyZXR1cm4gY3VycmVudFNsdWcgIT09IHdwc2VvX25ld19zbHVnO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fc2x1Z19jaGFuZ2VkID0gd3BzZW9fc2x1Z19jaGFuZ2VkO1xyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGN1cnJlbnRseSBhY3RpdmUgZWRpdG9yIHVzZWQgaW4gcXVpY2sgZWRpdC5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIGVkaXRvciB0aGF0IGlzIGN1cnJlbnRseSBhY3RpdmUuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19nZXRfYWN0aXZlX2VkaXRvcigpIHtcclxuXHRyZXR1cm4galF1ZXJ5KCBcInRyLmlubGluZS1lZGl0b3JcIiApO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fZ2V0X2FjdGl2ZV9lZGl0b3IgPSB3cHNlb19nZXRfYWN0aXZlX2VkaXRvcjtcclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjdXJyZW50IHBvc3Qgb3IgdGVybSBpZC5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgbm8gZWRpdG9yIGlzIGN1cnJlbnRseSBhY3RpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBJRCBvZiB0aGUgY3VycmVudCBwb3N0IG9yIHRlcm0uXHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19nZXRfaXRlbV9pZCgpIHtcclxuXHR2YXIgZWRpdG9yID0gd3BzZW9fZ2V0X2FjdGl2ZV9lZGl0b3IoKTtcclxuXHJcblx0aWYgKCBlZGl0b3IgPT09IFwiXCIgKSB7XHJcblx0XHRyZXR1cm4gXCJcIjtcclxuXHR9XHJcblxyXG5cdHJldHVybiBlZGl0b3IuYXR0ciggXCJpZFwiICkucmVwbGFjZSggXCJlZGl0LVwiLCBcIlwiICk7XHJcbn1cclxuXHJcbndpbmRvdy53cHNlb19nZXRfaXRlbV9pZCA9IHdwc2VvX2dldF9pdGVtX2lkO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIGtleS1iYXNlZCBldmVudHMgaW4gdGhlIHF1aWNrIGVkaXQgZWRpdG9yLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldiBUaGUgZXZlbnQgY3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmZ1bmN0aW9uIHdwc2VvX2hhbmRsZV9rZXlfZXZlbnRzKCBldiApIHtcclxuXHQvLyAxMyByZWZlcnMgdG8gdGhlIGVudGVyIGtleS5cclxuXHRpZiAoIGV2LndoaWNoID09PSAxMyAmJiB3cHNlb19zbHVnX2NoYW5nZWQoKSApIHtcclxuXHRcdHdwc2VvX3Nob3dfbm90aWZpY2F0aW9uKCk7XHJcblx0fVxyXG59XHJcblxyXG53aW5kb3cud3BzZW9faGFuZGxlX2tleV9ldmVudHMgPSB3cHNlb19oYW5kbGVfa2V5X2V2ZW50cztcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBidXR0b24tYmFzZWQgZXZlbnRzIGluIHRoZSBxdWljayBlZGl0IGVkaXRvci5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXYgVGhlIGV2ZW50IGN1cnJlbnRseSBiZWluZyBleGVjdXRlZC5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19oYW5kbGVfYnV0dG9uX2V2ZW50cyggZXYgKSB7XHJcblx0aWYgKCBqUXVlcnkoIGV2LnRhcmdldCApLmF0dHIoIFwiaWRcIiApICE9PSBcInNhdmUtb3JkZXJcIiAmJiB3cHNlb19zbHVnX2NoYW5nZWQoKSApIHtcclxuXHRcdHdwc2VvX3Nob3dfbm90aWZpY2F0aW9uKCk7XHJcblx0fVxyXG59XHJcblxyXG53aW5kb3cud3BzZW9faGFuZGxlX2J1dHRvbl9ldmVudHMgPSB3cHNlb19oYW5kbGVfYnV0dG9uX2V2ZW50cztcclxuXHJcbndpbmRvdy53cHNlb191bmRvX3JlZGlyZWN0ID0gcmVkaXJlY3RGdW5jdGlvbnMud3BzZW9fdW5kb19yZWRpcmVjdDtcclxud2luZG93Lndwc2VvX2NyZWF0ZV9yZWRpcmVjdCA9IHJlZGlyZWN0RnVuY3Rpb25zLndwc2VvX2NyZWF0ZV9yZWRpcmVjdDtcclxuXHJcbiggalF1ZXJ5KCBmdW5jdGlvbigpIHtcclxuXHR2YXIgd3BzZW9DdXJyZW50UGFnZSA9IHdwc2VvX2dldF9jdXJyZW50X3BhZ2UoKTtcclxuXHJcblx0Ly8gSWYgY3VycmVudCBwYWdlIGlzIGVkaXQqLnBocCwgY29udGludWUgZXhlY3V0aW9uLlxyXG5cdGlmICggd3BzZW9DdXJyZW50UGFnZSA9PT0gXCJlZGl0LnBocFwiIHx8IHdwc2VvQ3VycmVudFBhZ2UgPT09IFwiZWRpdC10YWdzLnBocFwiICkge1xyXG5cdFx0alF1ZXJ5KCBcIiNpbmxpbmUtZWRpdCBpbnB1dFwiICkub24oIFwia2V5ZG93blwiLCBmdW5jdGlvbiggZXYgKSB7XHJcblx0XHRcdHdwc2VvX2hhbmRsZV9rZXlfZXZlbnRzKCBldiApO1xyXG5cdFx0fSApO1xyXG5cclxuXHRcdGpRdWVyeSggXCIuYnV0dG9uLXByaW1hcnlcIiApLmNsaWNrKCBmdW5jdGlvbiggZXYgKSB7XHJcblx0XHRcdHdwc2VvX2hhbmRsZV9idXR0b25fZXZlbnRzKCBldiApO1xyXG5cdFx0fSApO1xyXG5cdH1cclxufSApICk7XHJcbiIsIi8qIGdsb2JhbCB3cHNlb19wcmVtaXVtX3N0cmluZ3MsIGFqYXh1cmwgKi9cclxuXHJcbi8qKlxyXG4gKiBVbmRvZXMgYSByZWRpcmVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbiBUaGUgcmVkaXJlY3QncyBvcmlnaW4uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXQgVGhlIHJlZGlyZWN0J3MgdGFyZ2V0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiByZWRpcmVjdC5cclxuICogQHBhcmFtIHtzdHJpbmd9IG5vbmNlIFRoZSBub25jZSBiZWluZyB1c2VkIHRvIHZhbGlkYXRlIHRoZSBjdXJyZW50IEFKQVggcmVxdWVzdC5cclxuICogQHBhcmFtIHtvYmplY3R9IHNvdXJjZSBUaGUgRE9NRWxlbWVudCBjb250YWluaW5nIHRoZSBhbGVydHMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuZnVuY3Rpb24gd3BzZW9fdW5kb19yZWRpcmVjdCggb3JpZ2luLCB0YXJnZXQsIHR5cGUsIG5vbmNlLCBzb3VyY2UgKSB7XHJcblx0alF1ZXJ5LnBvc3QoXHJcblx0XHRhamF4dXJsLFxyXG5cdFx0e1xyXG5cdFx0XHRhY3Rpb246IFwid3BzZW9fZGVsZXRlX3JlZGlyZWN0X3BsYWluXCIsXHJcblx0XHRcdGFqYXhfbm9uY2U6IG5vbmNlLFxyXG5cdFx0XHRyZWRpcmVjdDoge1xyXG5cdFx0XHRcdG9yaWdpbjogb3JpZ2luLFxyXG5cdFx0XHRcdHRhcmdldDogdGFyZ2V0LFxyXG5cdFx0XHRcdHR5cGU6IHR5cGUsXHJcblx0XHRcdH0sXHJcblx0XHR9LFxyXG5cdFx0ZnVuY3Rpb24oKSB7XHJcblx0XHRcdGpRdWVyeSggc291cmNlICkuY2xvc2VzdCggXCIueW9hc3QtYWxlcnRcIiApLmZhZGVPdXQoIFwic2xvd1wiICk7XHJcblx0XHR9XHJcblx0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSByZWRpcmVjdFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luIFRoZSBvcmlnaW4uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlICAgVGhlIHJlZGlyZWN0IHR5cGUsIHJlZ2V4IG9yIHBsYWluLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbm9uY2UgIFRoZSBub25jZS5cclxuICogQHBhcmFtIHtvYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9mIHRoZSByZWRpcmVjdC5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19jcmVhdGVfcmVkaXJlY3QoIG9yaWdpbiwgdHlwZSwgbm9uY2UsIHNvdXJjZSApIHtcclxuXHR2YXIgdGFyZ2V0ID0gXCJcIjtcclxuXHJcblx0aWYoIHBhcnNlSW50KCB0eXBlLCAxMCApICE9PSA0MTAgKSB7XHJcblx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1hbGVydCAqL1xyXG5cdFx0dGFyZ2V0ID0gd2luZG93LnByb21wdCggd3BzZW9fcHJlbWl1bV9zdHJpbmdzLmVudGVyX25ld191cmwucmVwbGFjZSggXCIlc1wiLCBvcmlnaW4gKSApO1xyXG5cdFx0LyogZXNsaW50LWVuYWJsZSBuby1hbGVydCAqL1xyXG5cclxuXHRcdGlmICggdGFyZ2V0ID09PSAnJyApIHtcclxuXHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQgKi9cclxuXHRcdFx0d2luZG93LmFsZXJ0KCB3cHNlb19wcmVtaXVtX3N0cmluZ3MuZXJyb3JfbmV3X3VybCApO1xyXG5cdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWFsZXJ0ICovXHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGpRdWVyeS5wb3N0KFxyXG5cdFx0YWpheHVybCxcclxuXHRcdHtcclxuXHRcdFx0YWN0aW9uOiBcIndwc2VvX2FkZF9yZWRpcmVjdF9wbGFpblwiLFxyXG5cdFx0XHRhamF4X25vbmNlOiBub25jZSxcclxuXHRcdFx0cmVkaXJlY3Q6IHtcclxuXHRcdFx0XHRvcmlnaW46IG9yaWdpbixcclxuXHRcdFx0XHR0YXJnZXQ6IHRhcmdldCxcclxuXHRcdFx0XHR0eXBlOiB0eXBlLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSxcclxuXHRcdGZ1bmN0aW9uKCByZXNwb25zZSApIHtcclxuXHRcdFx0dmFyIG5vdGljZSA9IGpRdWVyeSggc291cmNlICkuY2xvc2VzdCggXCIueW9hc3QtYWxlcnRcIiApO1xyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIGNsYXNzZXMgZmlyc3QuXHJcblx0XHRcdGpRdWVyeSggbm90aWNlIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidXBkYXRlZFwiIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwiZXJyb3JcIiApO1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHBvc3NpYmx5IGFkZGVkIHJlZGlyZWN0IGVycm9ycy5cclxuXHRcdFx0alF1ZXJ5KCBub3RpY2UgKS5maW5kKCBcIi5yZWRpcmVjdF9lcnJvclwiICkucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHRpZiggcmVzcG9uc2UuZXJyb3IgKSB7XHJcblx0XHRcdFx0Ly8gQWRkIHBhcmFncmFwaCBvbiB0b3Agb2YgdGhlIG5vdGljZSB3aXRoIGFjdGlvbnMgYW5kIHNldCBjbGFzcyB0byBlcnJvci5cclxuXHRcdFx0XHRqUXVlcnkoIG5vdGljZSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwiZXJyb3JcIiApXHJcblx0XHRcdFx0XHQucHJlcGVuZCggXCI8cCBjbGFzcz1cXFwicmVkaXJlY3RfZXJyb3JcXFwiPlwiICsgcmVzcG9uc2UuZXJyb3IubWVzc2FnZSArIFwiPC9wPlwiICk7XHJcblxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUGFyc2UgdGhlIHN1Y2Nlc3MgbWVzc2FnZS5cclxuXHRcdFx0dmFyIHN1Y2Nlc3NNZXNzYWdlID0gXCJcIjtcclxuXHRcdFx0aWYoIHBhcnNlSW50KCB0eXBlLCAxMCApID09PSA0MTAgKSB7XHJcblx0XHRcdFx0c3VjY2Vzc01lc3NhZ2UgPSB3cHNlb19wcmVtaXVtX3N0cmluZ3MucmVkaXJlY3Rfc2F2ZWRfbm9fdGFyZ2V0O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHN1Y2Nlc3NNZXNzYWdlID0gd3BzZW9fcHJlbWl1bV9zdHJpbmdzLnJlZGlyZWN0X3NhdmVkLnJlcGxhY2UoIFwiJTIkc1wiLCBcIjxjb2RlPlwiICsgcmVzcG9uc2UudGFyZ2V0ICsgXCI8L2NvZGU+XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c3VjY2Vzc01lc3NhZ2UgPSBzdWNjZXNzTWVzc2FnZS5yZXBsYWNlKCBcIiUxJHNcIiwgXCI8Y29kZT5cIiArIHJlc3BvbnNlLm9yaWdpbiArIFwiPC9jb2RlPlwiICk7XHJcblxyXG5cdFx0XHQvLyBTZXQgY2xhc3MgdG8gdXBkYXRlZCBhbmQgcmVwbGFjZSBodG1sIHdpdGggdGhlIHN1Y2Nlc3MgbWVzc2FnZS5cclxuXHRcdFx0alF1ZXJ5KCBub3RpY2UgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1cGRhdGVkXCIgKVxyXG5cdFx0XHRcdC5odG1sKCBcIjxwPlwiICsgc3VjY2Vzc01lc3NhZ2UgKyBcIjwvcD5cIiApO1xyXG5cdFx0fSxcclxuXHRcdFwianNvblwiXHJcblx0KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcblx0d3BzZW9fY3JlYXRlX3JlZGlyZWN0OiB3cHNlb19jcmVhdGVfcmVkaXJlY3QsXHJcblx0d3BzZW9fdW5kb19yZWRpcmVjdDogd3BzZW9fdW5kb19yZWRpcmVjdCxcclxufTtcclxuIl19
